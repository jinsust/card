var webengage=webengage||{};var _weq=_weq||{};(function(a){var b={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(t){if(t==null){return""}var v="";var m,o,q,n,p,r,s;var u=0;t=b.compress(t);while(u<t.length*2){if(u%2==0){m=t.charCodeAt(u/2)>>8;o=t.charCodeAt(u/2)&255;if(u/2+1<t.length){q=t.charCodeAt(u/2+1)>>8}else{q=NaN}}else{m=t.charCodeAt((u-1)/2)&255;if((u+1)/2<t.length){o=t.charCodeAt((u+1)/2)>>8;q=t.charCodeAt((u+1)/2)&255}else{o=q=NaN}}u+=3;n=m>>2;p=((m&3)<<4)|(o>>4);r=((o&15)<<2)|(q>>6);s=q&63;if(isNaN(o)){r=s=64}else{if(isNaN(q)){s=64}}v=v+b._keyStr.charAt(n)+b._keyStr.charAt(p)+b._keyStr.charAt(r)+b._keyStr.charAt(s)}return v},decompressFromBase64:function(v){if(v==null){return""}var A="",x=0,w,f,q,s,p,r,t,u,z=0,y=b._f;v=v.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(z<v.length){p=b._keyStr.indexOf(v.charAt(z++));r=b._keyStr.indexOf(v.charAt(z++));t=b._keyStr.indexOf(v.charAt(z++));u=b._keyStr.indexOf(v.charAt(z++));f=(p<<2)|(r>>4);q=((r&15)<<4)|(t>>2);s=((t&3)<<6)|u;if(x%2==0){w=f<<8;if(t!=64){A+=y(w|q)}if(u!=64){w=s<<8}}else{A=A+y(w|f);if(t!=64){w=q<<8}if(u!=64){A+=y(w|s)}}x+=3}return b.decompress(A)},compress:function(C){if(C==null){return""}var A,x,v={},w={},u="",E="",f="",D=2,B=3,F=2,s="",G=0,z=0,t,y=b._f;for(t=0;t<C.length;t+=1){u=C.charAt(t);if(!Object.prototype.hasOwnProperty.call(v,u)){v[u]=B++;w[u]=true}E=f+u;if(Object.prototype.hasOwnProperty.call(v,E)){f=E}else{if(Object.prototype.hasOwnProperty.call(w,f)){if(f.charCodeAt(0)<256){for(A=0;A<F;A++){G=(G<<1);if(z==15){z=0;s+=y(G);G=0}else{z++}}x=f.charCodeAt(0);for(A=0;A<8;A++){G=(G<<1)|(x&1);if(z==15){z=0;s+=y(G);G=0}else{z++}x=x>>1}}else{x=1;for(A=0;A<F;A++){G=(G<<1)|x;if(z==15){z=0;s+=y(G);G=0}else{z++}x=0}x=f.charCodeAt(0);for(A=0;A<16;A++){G=(G<<1)|(x&1);if(z==15){z=0;s+=y(G);G=0}else{z++}x=x>>1}}D--;if(D==0){D=Math.pow(2,F);F++}delete w[f]}else{x=v[f];for(A=0;A<F;A++){G=(G<<1)|(x&1);if(z==15){z=0;s+=y(G);G=0}else{z++}x=x>>1}}D--;if(D==0){D=Math.pow(2,F);F++}v[E]=B++;f=String(u)}}if(f!==""){if(Object.prototype.hasOwnProperty.call(w,f)){if(f.charCodeAt(0)<256){for(A=0;A<F;A++){G=(G<<1);if(z==15){z=0;s+=y(G);G=0}else{z++}}x=f.charCodeAt(0);for(A=0;A<8;A++){G=(G<<1)|(x&1);if(z==15){z=0;s+=y(G);G=0}else{z++}x=x>>1}}else{x=1;for(A=0;A<F;A++){G=(G<<1)|x;if(z==15){z=0;s+=y(G);G=0}else{z++}x=0}x=f.charCodeAt(0);for(A=0;A<16;A++){G=(G<<1)|(x&1);if(z==15){z=0;s+=y(G);G=0}else{z++}x=x>>1}}D--;if(D==0){D=Math.pow(2,F);F++}delete w[f]}else{x=v[f];for(A=0;A<F;A++){G=(G<<1)|(x&1);if(z==15){z=0;s+=y(G);G=0}else{z++}x=x>>1}}D--;if(D==0){D=Math.pow(2,F);F++}}x=2;for(A=0;A<F;A++){G=(G<<1)|(x&1);if(z==15){z=0;s+=y(G);G=0}else{z++}x=x>>1}while(true){G=(G<<1);if(z==15){s+=y(G);break}else{z++}}return s},decompress:function(z){if(z==null){return""}if(z==""){return null}var v=[],A,E=4,y=4,B=3,f="",H="",C,u,c,I,G,F,w,x=b._f,D={string:z,val:z.charCodeAt(0),position:32768,index:1};for(C=0;C<3;C+=1){v[C]=C}c=0;G=Math.pow(2,2);F=1;while(F!=G){I=D.val&D.position;D.position>>=1;if(D.position==0){D.position=32768;D.val=D.string.charCodeAt(D.index++)}c|=(I>0?1:0)*F;F<<=1}switch(A=c){case 0:c=0;G=Math.pow(2,8);F=1;while(F!=G){I=D.val&D.position;D.position>>=1;if(D.position==0){D.position=32768;D.val=D.string.charCodeAt(D.index++)}c|=(I>0?1:0)*F;F<<=1}w=x(c);break;case 1:c=0;G=Math.pow(2,16);F=1;while(F!=G){I=D.val&D.position;D.position>>=1;if(D.position==0){D.position=32768;D.val=D.string.charCodeAt(D.index++)}c|=(I>0?1:0)*F;F<<=1}w=x(c);break;case 2:return""}v[3]=w;u=H=w;while(true){if(D.index>D.string.length){return""}c=0;G=Math.pow(2,B);F=1;while(F!=G){I=D.val&D.position;D.position>>=1;if(D.position==0){D.position=32768;D.val=D.string.charCodeAt(D.index++)}c|=(I>0?1:0)*F;F<<=1}switch(w=c){case 0:c=0;G=Math.pow(2,8);F=1;while(F!=G){I=D.val&D.position;D.position>>=1;if(D.position==0){D.position=32768;D.val=D.string.charCodeAt(D.index++)}c|=(I>0?1:0)*F;F<<=1}v[y++]=x(c);w=y-1;E--;break;case 1:c=0;G=Math.pow(2,16);F=1;while(F!=G){I=D.val&D.position;D.position>>=1;if(D.position==0){D.position=32768;D.val=D.string.charCodeAt(D.index++)}c|=(I>0?1:0)*F;F<<=1}v[y++]=x(c);w=y-1;E--;break;case 2:return H}if(E==0){E=Math.pow(2,B);B++}if(v[w]){f=v[w]}else{if(w===y){f=u+u.charAt(0)}else{return null}}H+=f;v[y++]=u+f.charAt(0);E--;u=f;if(E==0){E=Math.pow(2,B);B++}}}};a.LZString=b})(webengage);webengage.eLog=function(f,h,d,b,m,c){if(f instanceof Error){d=f.stack||f.description;d=(d.length>900?d.substring(0,900):d);b=f.message||d.substring(0,50);h="exception"}if(h){if(c&&m){var a="{'version':'"+webengage.getWidgetVersion()+"','text':'"+d+"', 'et':'"+m+"', 'eid':'"+c+"'}"}else{var a="{'version':'"+webengage.getWidgetVersion()+"','text':'"+d+"'}"}var g=(h==="error"?"//c.webengage.com/e.jpg":"//c.webengage.com/e.jpg");if(webengage.winUnloading&&h==="error"){return}var k=new Image();k.src=g+"?event="+encodeURIComponent(b)+"&category="+_weq["webengage.licenseCode"]+"&type="+h+"&data="+encodeURIComponent(a)+"&ts="+(new Date()).getTime()}};webengage.withELog=function(c,a,b){if(typeof c==="function"){try{if(!(a instanceof Array)){a=[]}return c.apply(undefined,a)}catch(d){webengage.eLog(d);if(!b){throw d}}}else{throw new Error("WithELog : first argument not a function")}};webengage.setTimeout=function(a,b){return setTimeout(function(){webengage.withELog(a)},b)};webengage.setInterval=function(b,a){return setInterval(function(){webengage.withELog(b)},a)};webengage.setTimeout(function(){(function(d,a,f,c,e){var b=function(){var m=null,n=function(I,H,F){var G=(typeof(F)==="boolean"?F:true);for(var E in H){if(I[E]===e||G){I[E]=H[E]}}return I},y={},B=[],u=false;n(c,{util:{copy:function(G,F,E){return n(G,F,E)},loadScript:function(H,I,E,J){var G=a.createElement("script");G.type="text/javascript";G.charset="UTF-8";G.async=true;G.src=H;G.callBack=I;G.callBackArgs=E||[];G.errorCallBack=J;this.appendChild(G);if(c.BrowserDetect.ie()&&c.BrowserDetect.version()<11&&G.readyState){if(typeof I==="function"){var F=function(){if(G.readyState=="loaded"||G.readyState=="complete"){c.withELog(I,E)}};G.defer=true;G.onreadystatechange=F}}else{c.util.addListener(G,"load",function(K){c.withELog(I,E)});c.util.addListener(G,"error",function(K){if(c.getWidgetVersion()!=="3.0"){c.eLog(null,"error","could not load - "+H,"script loading error")}if(typeof J==="function"){c.withELog(J,[K])}})}},createObj:function(F){var G=c,E=F?F.split("."):[];for(var H=0;H<E.length;H++){var J=E[H],I=G[J];if(!I){I={};G[J]=I}G=I}return G},extend:function(E,F){return c.util.copy((typeof E=="string"?c.util.createObj(E):E),F)},isJqueryPresent:function(){return(d.jQuery!==e&&parseFloat("."+d.jQuery().jquery.replace(/\./g,""))>=0.13)},applyCss:function(G,F){try{for(var E in F){if(typeof F[E]=="function"){G.style[E]=F[E]()}else{G.style[E]=F[E]}}}catch(H){}return G},isArray:function(E){return(E&&E.constructor==Array)},inArray:function(E,G){for(var F=0;F<E.length;F++){if(E[F]==G){return true}}return false},getMaxZIndex:function(){if(this.maxZIndex===e){this.maxZIndex=16776271}return this.maxZIndex++},alignCenter:function(H,G,F){var E=(F=="left")?"right":"left";H.style.top=((parseInt(c.util.getElementHeight(G),10)-parseInt(c.util.getElementHeight(H),10))/2-(/Firefox/i.test(navigator.userAgent)?7:0))+"px";H.style[E]=(parseInt(c.util.getElementWidth(G),10)-parseInt(c.util.getElementWidth(H),10))/2+10+"px"},getElementWidth:function(E){if(E.clip!==e){return E.clip.width}else{if(E.style.pixelWidth){return E.style.pixelWidth}else{return E.offsetWidth}}},getElementHeight:function(E){if(E.clip!==e){return E.clip.height}else{if(E.style.pixelHeight){return E.style.pixelHeight}else{return E.offsetHeight}}},isSupportsLocalStorage:function(G){try{var E=(typeof(Storage)!=="undefined"&&"localStorage" in d&&d.localStorage!==null);if(!G&&E){d.localStorage["_we_dm_ios_sup_f_"]="true";d.localStorage.removeItem("_we_dm_ios_sup_f_")}return E}catch(F){return false}},getWindowHeight:function(){return"innerHeight" in d?d.innerHeight:a.documentElement.offsetHeight},getWindowWidth:function(){return"innerWidth" in d?d.innerWidth:a.documentElement.offsetWidth},getInitParamValue:function(E,I,F,H){var G=F!==e?F:null;if(E&&E[I]){var J=E[I];if(H){if(c.util.inArray(H,J)){G=J}}else{G=J}}return G},getInitParamValueAsArray:function(E,K,H,J){var I=c.util.getInitParamValue(E,K,H);if(I&&typeof(I)!="object"){I=I.split(/\s*,\s*/)}if(J&&typeof(J)=="object"){var F=[];for(var G=0;G<I.length;G++){if(c.util.inArray(J,I[G])){F[F.length]=I[G]}}I=F}return I},setCookie:function(F,L,G,N,I,E,H){if(c.util.isSupportsLocalStorage()&&!H){try{d.localStorage[F]=L;return"ls"}catch(J){d.localStorage.removeItem(F);return c.util.setCookie(F,L,G,N,I,E,true)}}else{if(c.util.isSupportsLocalStorage(true)&&!H){d.localStorage.removeItem(F)}var K=new Date();K.setTime(K.getTime());if(G){G=G*1000*60*60*24}var M=new Date(K.getTime()+(G));a.cookie=F+"="+encodeURIComponent(L)+((G)?";expires="+M.toGMTString():"")+((N)?";path="+N:"")+((I)?";domain="+I:"")+((E)?";secure":"");return"ck"}},getCookie:function(E,G){if(c.util.isSupportsLocalStorage(true)&&!G){return(d.localStorage[E]?d.localStorage[E]:c.util.getCookie(E,true))}else{var K=a.cookie.split(";");var F="";var I="";var J="";var H=false;for(i=0;i<K.length;i++){F=K[i].split("=");I=F[0].replace(/^\s+|\s+$/g,"");if(I==E){H=true;if(F.length>1){J=decodeURIComponent(F[1].replace(/^\s+|\s+$/g,""))}return J===null?"":J}F=null;I=""}if(!H){return null}}},addListener:function(E,F,G){if(E.addEventListener){E.addEventListener(F,G,false)}else{if(E.attachEvent){E.attachEvent("on"+F,G)}}},removeListener:function(E,F,G){if(E.removeEventListener){E.removeEventListener(F,G)}else{if(E.detachEvent){E.detachEvent("on"+F,G)}}},bindEvent:function(E,F){c.util.addListener(d,E,F)},unbindEvent:function(E,F){c.util.removeListener(d,E,F)},getCurrentTime:function(F){var I=new Date();var G=I.getTime();if(F!==e){var H=I.getTimezoneOffset()*60000;var E=G+H;G=E+(1000*F)}return G},getCurrentWeekDay:function(F){var E=v.getCurrentTime();var G=new Date(E);return G.getDay()},setWebengageCookie:function(F){var I=(function(){var J=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return((new Date().getTime())+J()+J()+J()+J())})();var H=F||{};var G={time:(new Date()).getTime(),luid:I};H=this.copy(H,G,false);var E=this.stringify(H);y._we_wk_ls_=H;this.setCookie("_we_wk_ls_",c.LZString.compressToBase64(E),99999,"/","","");if(this.firstTimeUser===e){this.firstTimeUser=true}return H},getWebengageCookie:function(){var E=this.getCookie("_we_wk_ls_")||this.getCookie("_we_wk_ls_",true)||y._we_wk_ls_;if(E){if(E.charAt(0)!=="{"){E=c.LZString.decompressFromBase64(E)}if(this.isSupportsLocalStorage()&&this.getCookie("_we_wk_ls_",true)){this.setCookie("_we_wk_ls_",E,-1,"/","","",true);this.setCookie("_we_wk_ls_",E,99999,"/","","")}y._we_wk_ls_=new Function("return "+E)()||null}else{this.setWebengageCookie()}return y._we_wk_ls_},setSessionCookie:function(H,I){var F={referrer:a.referrer,isFirstTime:this.isFirstTimeUser(),sst:(new Date()).getTime(),pvc:0,suid:(new Date().getTime()),landingPage:d.location.href};var G=H||{};G=this.copy(G,F,false);if(!this.isSupportsLocalStorage()&&G.landingPage){delete G.landingPage}var J=this.stringify(G);y._we_wk_ss_=G;var E=this.setCookie("_we_wk_ss_",c.LZString.compressToBase64(J),"","/","","");if(this.isSupportsLocalStorage()){if(E==="ls"){this.setCookie("_we_wk_ss_lsf_",true,"","/","","",true)}else{this.setCookie("_we_wk_ss_lsf_",false,"","/","","",true)}}if(typeof I==="boolean"&&true){this.updateTSC()}return G},getSessionCookie:function(){var H=this.getCookie("_we_wk_ss_")||this.getCookie("_we_wk_ss_",true)||y._we_wk_ss_;if(H){try{if(H.charAt(0)!=="{"){H=c.LZString.decompressFromBase64(H)}if(this.isSupportsLocalStorage()){var G=this.getCookie("_we_wk_ss_lsf_",true);if(!G||G==="false"){var E=this.getCookie("_we_wk_ss_",true);if(E){this.setCookie("_we_wk_ss_",H,-1,"/","","",true);this.setSessionCookie(E)}else{throw new Error()}}}y._we_wk_ss_=(new Function("return "+H)())||null}catch(F){y._we_wk_ss_=this.setSessionCookie(null,true)}}else{y._we_wk_ss_=this.setSessionCookie(null,true)}return y._we_wk_ss_},updateSessionCookie:function(F){var E=this.getSessionCookie();if(E){this.copy(E,(F||{}));this.setSessionCookie(E)}else{E=this.setSessionCookie(null,true)}return E},updateTSC:function(){var E=this.getWebengageCookie();E.sc=E.sc||0;E.sc++;return this.setWebengageCookie(E)},updateTPVC:function(){var E=this.getWebengageCookie();E.tpvc=E.tpvc||0;E.tpvc++;return this.setWebengageCookie(E)},setLST:function(){var E=this.getWebengageCookie();E.lst=(new Date()).getTime();return this.setWebengageCookie(E)},setGZIPFlag:function(F){var E=this.getWebengageCookie();E.isGzip=F||false;return this.setWebengageCookie(E)},setVTD:function(){var E=this.getSessionCookie();E.vtd=1;return this.updateSessionCookie(E)},updateSessionCookieGeoData:function(){var E={country:c.GEO.country(),region:c.GEO.region(),city:c.GEO.city(),ip:c.GEO.ip(),tsD:(c.GEO.serverTimeStamp()&&!isNaN(c.GEO.serverTimeStamp())?((new Date()).getTime()-parseInt(c.GEO.serverTimeStamp(),10)):0)};return this.updateSessionCookie(E)},getClientPageUrl:function(){return d.location.href},getClientPageHost:function(){return d.location.host},escapeScopeChars:function(E){return(E+"").replace(/([,#[\]\\])/g,"$1")},escapeForRegExp:function(E){return(E+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},isFirstTimeUser:function(){return(this.firstTimeUser!==e)?this.firstTimeUser:false},escapeNewLine:function(E){return E.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\/]/g,"\\/").replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t")},stringify:function(J){if(typeof JSON!=="undefined"&&typeof JSON.stringify==="function"){return JSON.stringify(J)}else{var H=typeof(J);if(H!=="undefined"){if(H!="object"||J===null){if(H=="string"){J='"'+this.escapeNewLine(J)+'"'}return String(J)}else{var G=[],E=(J&&J.constructor==Array),I=(J&&J instanceof Date);if(E){for(var F=0;F<J.length;F++){var K=this.stringify(J[F]);if(typeof K!=="undefined"){G.push(K)}}}else{if(I){return I.toString()}else{for(var L in J){var K=this.stringify(J[L]);if(typeof K!=="undefined"){G.push('"'+L+'":'+K)}}}}return(E?"[":"{")+String(G)+(E?"]":"}")}}}},trimStr:function(E){if(typeof E.trim==="function"){return E.trim()}else{if(typeof E==="string"){return E.replace(/^\s+|\s+$/g,"")}}return E},clientDataString:function(K){var H=function(N){var L=N;if(typeof N==="function"){try{L=N()}catch(M){L=null}}return L};if(typeof K==="object"){for(var G in K){var I=K[G];if(I===e||(typeof I!=="boolean"&&I!==0&&!I)){delete K[G];continue}if(!(I instanceof Array)){K[G]=new Array();var J=H(I);if(J===e||(typeof J!=="boolean"&&J!==0&&!J)){delete K[G]}else{K[G].push(J)}}else{var E=[];for(var F=0;F<I.length;F++){I[F]=H(I[F]);if(!(I[F]===e||(typeof I[F]!=="boolean"&&I[F]!==0&&!I[F]))){E.push(I[F])}}if(E.length>0){K[G]=E}else{delete K[G]}}}}return c.util.stringify(K)},isColorTooLight:function(F){F=F.indexOf("#")===0?F.substr(1,F.length):F;var H=parseInt(F.substr(0,2),16);var G=parseInt(F.substr(2,2),16);var E=parseInt(F.substr(4,2),16);var I=((H*299)+(G*299)+(E*299))/1000;return I>=128},isEmptyObject:function(E){for(var F in E){if(E.hasOwnProperty(F)){return false}}return true},parseJSON:function(E){return new Function("return "+E+";")()},bind:function(J,H){var K=this;var I=K.callbacks||{};if(J!==e&&typeof(H)==="function"){var L=H;H=function(){return L.apply(this,arguments)};H.cbid=(L.cbid=K.cbid++);J=(J||"").match(/\S+/g)||[""];var G=J.length;while(G--){var F=J[G];var E=I[F]||{};E[H.cbid]=H;I[F]=E}K.callbacks=I}return K},unbind:function(E,F){var G=this;if(E!==e){if(typeof(G.callbacks)==="object"&&typeof(G.callbacks[E])==="object"){if(typeof(F)==="function"&&F.cbid){delete G.callbacks[E][F.cbid]}else{delete G.callbacks[E]}}}return G},executeCallbacks:function(){var H=this;if(typeof H.enableCallbacks==="boolean"&&H.enableCallbacks){var E=arguments[0];if(E!==e&&typeof H.callbacks==="object"&&typeof H.callbacks[E]==="object"){for(var F in H.callbacks[E]){if(typeof H.callbacks[E][F]==="function"){var G=H.callbacks[E][F].apply(this,Array.prototype.slice.call(arguments,1));if(typeof G==="boolean"&&!G){return false}}}}}},markSurveyAsClosed:function(G,F){if(G){try{var E=c.util.getSessionCookie();if(E.closedSurveys===e||!E.closedSurveys){E.closedSurveys=""}if(E.closedSurveys.indexOf("##"+G)<0){E.closedSurveys+="##"+G}c.util.updateSessionCookie(E);if(F&&typeof F.dump==="function"){F.dump("close")}}catch(H){}}},markSurveyAsTaken:function(H,G,F){if(H){try{var J=true;var E=c.util.getWebengageCookie();if(E.takenSurveys===e||!E.takenSurveys){E.takenSurveys=""}if(E.takenSurveys.indexOf("##"+H)<0){E.takenSurveys+="##"+H;J=false}c.util.setWebengageCookie(E);if(G&&typeof G.dump==="function"&&F&&typeof F==="boolean"&&F){G.event=G.event||"submit";if(G.event==="submit"&&!J){G.dump(G.event)}else{if(G.event==="complete"){G.dump(G.event)}}}}catch(I){}}},markEntityAsShown:function(J,F,K,N){if(J&&F){var E=1,G=1;try{var H=c.util.getWebengageCookie(),O=c.util.getSessionCookie(),M=(("notification"===F)?(N&&N===true?"anids":"seenNIds"):(("survey"===F)?(N&&N===true?"asids":"seenSIds"):null));whatToLookInSC=(("notification"===F)?(N&&N===true?"anids":"snids"):(("survey"===F)?(N&&N===true?"asids":"ssids"):null));if(M&&whatToLookInSC){H[M]=H[M]&&H[M]!==e?H[M]:"";if(H[M].indexOf("##"+J)<0){H[M]+="##"+J+"="+E}else{var L=new RegExp("##"+J+"=(\\d+)","g");H[M]=H[M].replace(L,function(P,Q){E=(+Q+1);return"##"+J+"="+E})}O[whatToLookInSC]=O[whatToLookInSC]&&O[whatToLookInSC]!==e?O[whatToLookInSC]:"";if(O[whatToLookInSC].indexOf("##"+J)<0){O[whatToLookInSC]+="##"+J+"="+G}else{var L=new RegExp("##"+J+"=(\\d+)","g");O[whatToLookInSC]=O[whatToLookInSC].replace(L,function(P,Q){G=(+Q+1);return"##"+J+"="+G})}c.util.updateSessionCookie(O);c.util.setWebengageCookie(H)}}catch(I){}}},markNotificationAsClicked:function(I,J,G){if(I){try{var F=c.util.getWebengageCookie(),E=c.util.getSessionCookie();F.takenNIds=F.takenNIds&&F.takenNIds!==e?F.takenNIds:"";if(F.takenNIds.indexOf("##"+I)<0){F.takenNIds+="##"+I}c.util.setWebengageCookie(F);if(G&&typeof G.dump==="function"){G.dump("click")}}catch(H){}}},markNotificationAsClosed:function(H,F){if(H){try{var E=c.util.getSessionCookie();if(E.closedNIds===e||!E.closedNIds){E.closedNIds=""}if(E.closedNIds.indexOf("##"+H)<0){E.closedNIds+="##"+H}c.util.updateSessionCookie(E);if(F&&typeof F.dump==="function"){F.dump("close")}}catch(G){}}},setMinimizedState:function(E,G,I){var H=(E==="notification"?"minNIds":"minSIds");if(G){try{var F=c.util.getSessionCookie();if(F[H]===e||!F[H]){F[H]=""}if(I){if(F[H].indexOf("##"+G)<0){F[H]+="##"+G}}else{F[H]=F[H].replace("##"+G,"")}c.util.updateSessionCookie(F)}catch(J){}}},getMinimizedState:function(E,G){var H=(E==="notification"?"minNIds":"minSIds");var I=false;if(G){try{var F=c.util.getSessionCookie();if(F[H]!==e){if(0<=F[H].indexOf("##"+G)){I=true}}}catch(J){}}return I},getVersion:function(){return s.widgetVersion},usckwl:function(G){var F=c.util.getSessionCookie();F.pvc=(F.pvc?F.pvc+1:1);if(G&&a.referrer&&(!F.referrer||F.referrer!==a.referrer)){var E=a.referrer.match(/:\/\/(.[^\/]+)/)[1];if(!E.match(new RegExp(c.util.escapeForRegExp(G)+"$","gi"))){F.referrer=a.referrer}}c.util.updateSessionCookie(F)},getHashCode:function(I){var G=0,F,E,H=I||"";if(H.length==0){return G}for(F=0,l=H.length;F<l;F++){E=H.charCodeAt(F);G=((G<<5)-G)+E;G|=0}return G},getTotalTimesShown:function(K,G,F,N){var E=0;if(K&&G){var M=null,I=null;if(F){M=v.getSessionCookie();I=(("notification"===G)?(N&&N===true?"anids":"snids"):(("survey"===G)?(N&&N===true?"asids":"ssids"):null))}else{M=v.getWebengageCookie();I=(("notification"===G)?(N&&N===true?"anids":"seenNIds"):(("survey"===G)?(N&&N===true?"asids":"seenSIds"):null))}if(M&&I&&M[I]){try{var L=new RegExp("##"+K+"=(\\d+)");var H=M[I].match(L);if(H instanceof Array&&H.length>1){E=parseInt(H[1],10)}}catch(J){}}}return E},attachEventListners:function(H,E){var F=(H==="survey"?c.survey.callbacks:(H==="feedback"?c.feedback.callbacks:c.notification.callbacks));if(typeof F!==e&&F){for(eventName in F){var G=F[eventName];if(typeof callbacks!=e&&G){for(_cbid in G){this.bind.apply(E,[eventName,G[_cbid]])}}}}},hasSVG:function(){return !!a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},onDocReady:function(E){if(typeof E==="function"){if(a.body){c.withELog(function(){E()});return}if(a.addEventListener){a.addEventListener("DOMContentLoaded",function(){c.withELog(function(){a.removeEventListener("DOMContentLoaded",arguments.callee,false);E()})},false)}else{if(a.attachEvent){a.attachEvent("onreadystatechange",function(){c.withELog(function(){if(a.readyState==="complete"){a.detachEvent("onreadystatechange",arguments.callee);E()}})});if(a.documentElement.doScroll&&d==d.top){(function(){c.withELog(function(){try{a.documentElement.doScroll("left")}catch(F){setTimeout(arguments.callee,0);return}E()})})()}}}}},abortAllInstances:function(E){c.withELog(function(){if(E.length>0){for(var F=0;F<E.length;F++){if(typeof E[F].abort==="function"){E[F].abort()}}}})},abortInstance:function(E){c.withELog(function(){if(E){if(typeof E.close==="function"){E.close()}else{E.onLoad(function(){this.close()})}}})},uwats:function(){if(!f["webengage.isDemoMode"]){if(!webengage_fs_configurationMap.lastWidgetCheckDate||Math.floor((Math.random()*100)+1)<=10){var E=1000*60*60*24;var G=new Date().getTime()-(7*E);if(webengage_fs_configurationMap.lastWidgetCheckDate){var F=new Date(webengage_fs_configurationMap.lastWidgetCheckDate);if(F<G){c.eLog(null,"info",F.getTime(),"widget-verified")}}else{c.eLog(null,"info","no-check-date","widget-verified")}}}},isSmallScreen:function(){var E=480,F=d.screen.availWidth;return(F<=E?true:false)},webklitWorkAround:function(E){var F=a.body.scrollTop||0;if(a.location.toString().match(/#(top)?$/)){E.body.scrollTop=0;a.body.scrollTop=F}},getWeDataContainer:function(){return s.weDataContainer},withWeJquery:function(E){c.jQSt=c.jQSt||0;switch(c.jQSt){case 1:setTimeout(function(){c.util.withWeJquery(E)},100);break;case 2:if(typeof E==="function"){E()}break;default:c.jQSt=1;c.util.loadScript.apply(s.widgetContainer,[s.weJquery,function(){$weJQuery=jQuery.noConflict(true);c.jQSt=2;if(typeof E==="function"){E()}}]);break}},tsTracking:function(F,G){if(F){var E=new Image();E.src="//"+s.tstbu+F+(G?"?"+G:"")}},isElementExists:function(F){var E=(F);if(E&&F.nodeType&&F.nodeType===1){E=(F.style&&((F.style.display&&F.style.display==="none")||(F.style.visibility&&F.style.visibility==="hidden")))?false:true}return E},onReady:function(E){if(typeof E==="function"){if(u){E()}else{B[B.length]=E}}}}},true);n(c,{getWidgetVersion:function(){return f["webengage.widgetVersion"]||"4.0"}},true);var v=c.util;var s={widgetVersion:"4",weJquery:"//d3701cc9l7v9a6.cloudfront.net/js/jquery/jquery-1.3.2.min.js",baseWebEngageUrl:"//webengage.com",feedbackAppHost:"feedback.webengage.com",surveyAppHost:"survey.webengage.com",widgetDomain:"//d3701cc9l7v9a6.cloudfront.net",baseStaticUrl:"//d3701cc9l7v9a6.cloudfront.net",loadSurveyWidgetUrl:function(E){return"/js/widget/we-survey-widget-"+(E?E:"~483819f")+"-v-4.0.js?v=404.00"},loadSurveyWidgetUrlv3:"/js/widget/we-survey-widget.js?v=404.00",notificationWidgetScriptUrl:"/js/widget/we-notification-widget-v-4.1.js?v=404.00",findAllTakenSurveysUrl:function(){return"//survey.webengage.com/publisher-widget-loader.html?action=findAllTakenSurveys&licenseCode="+f["webengage.licenseCode"]+"&url="+encodeURIComponent(v.getClientPageUrl())},widgetContainerId:"webklipper-publisher-widget-container",feedbackImageBaseUrl:"//s3-ap-southeast-1.amazonaws.com/wk-static-files/webengage/feedbacktab/",loadFeedbackWidgetUrl:"/js/widget/we-feedback-widget-v-4.0.js?v=404.00",loadFeedbackWidgetUrlv3:"/js/widget/we-feedback-widget.js?v=404.00",gaCallbacksScriptUrl:"//d3701cc9l7v9a6.cloudfront.net/js/widget/ga-callbacks-helper.js?v=404.00",tstbu:"c.webengage.com",csUrl:"//d3701cc9l7v9a6.cloudfront.net/js/widget/we-conversion-helper-min-v-1.0.js?v=404.00"};var C={};v.extend("logger",(function(){var F={containerCss:{position:function(){return c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?"absolute":"fixed"},cursor:"default",margin:0,zIndex:(v.getMaxZIndex()+1),backgroundColor:"red",right:"0px",bottom:"0px",display:"block",padding:"10px",maxWidth:"500px",textAlign:"left",lineHeight:"17px",background:"none repeat scroll 0 0 #ff9",border:"1px solid #fc6",borderBottomWidth:"0px",borderRightWidth:"0px",borderTopLeftRadius:"5px",MozBorderRadiusTopleft:"5px",WebkitBorderTopLeftRadius:"5px",boxShadow:"0 1px 0 0 rgba(255, 255, 255, 0.6) inset, 0 1px 1px rgba(0, 0, 0, 0.1)",MozBoxShadow:"0 1px 0 0 rgba(255, 255, 255, 0.6) inset, 0 1px 1px rgba(0, 0, 0, 0.1)",WebkitBoxShadow:"0 1px 0 0 rgba(255, 255, 255, 0.6) inset, 0 1px 1px rgba(0, 0, 0, 0.1)",fontFamily:"Arial, sans-serif",fontSize:"13px"},dataDivCss:{margin:"0px",padding:"0px",color:"#000",textShadow:"1px 1px #f1f1f1",textDecoration:"none",fontFamily:"inherit",fontSize:"inherit"},dataDivLinkCss:{color:"#039",textDecoration:"underline",textShadow:"1px 1px #f1f1f1",fontFamily:"inherit",fontSize:"inherit"},closeButtonCss:{color:"#039",textDecoration:"underline",textShadow:"1px 1px #f1f1f1",cursor:"pointer",cssFloat:"right",styleFloat:"right",marginRight:"5px",marginLeft:"30px"}},E=function(Q,P){var I=a.getElementById("webengage-error-messages");if(I){I.parentNode.removeChild(I)}var K=a.createElement("div");K.setAttribute("id","webengage-error-messages");K=v.applyCss(K,F.containerCss);a.body.insertBefore(K,null);var O=a.createElement("div");O=v.applyCss(O,F.closeButtonCss);O.innerHTML="x";K.appendChild(O);O.onclick=function(){this.parentNode.parentNode.removeChild(this.parentNode)};var H=a.createElement("div");H=v.applyCss(H,F.dataDivCss);K.appendChild(H);H.innerHTML=Q;var L=H.getElementsByTagName("a");if(L&&L.length>0){for(var M=0;M<L.length;M++){v.applyCss(L[M],F.dataDivLinkCss);var J=L[M].getAttribute("href");var G=J.split("#");var N=G[0];N=N.indexOf("?")<0?(N+"?"):N;N=N+"&ref=widget-message";N=G.length==2?(N+"#"+G[1]):N;L[M].setAttribute("href",N)}}c.eLog(null,P,Q,Q);setTimeout(function(){K.remove()},5000);return K};return{success:function(G){return E(G,"success")},warn:function(G){return E(G,"warn")},error:function(G){return E(G,"error")}}})());v.extend("GEO",{country:function(){return this._country||""},country_code:function(){return this._country_code||""},region:function(){return this._region||""},city:function(){return this._city||""},latitude:function(){return this._latitude||""},longitude:function(){return this._longitude||""},serverTimeStamp:function(){return this._serverTimeStamp},ip:function(){return this._ip||""},setGeoData:function(G){var F=this,E=G||{};F._country=E.geoplugin_countryName||"";F._country_code=E.geoplugin_country_code||"";F._region=E.geoplugin_region||"";F._city=E.geoplugin_city||"";F._latitude=E.geoplugin_latitude||"";F._longitude=E.geoplugin_longitude||"";F._serverTimeStamp=E.serverTimeStamp;F._ip=E.clientIp;c.getUser().country=F._country;c.getUser().city=F._city;c.getUser().ip=F._ip},isGeoLoaded:function(){return this._isLoaded?this._isLoaded:v.getSessionCookie().tsD?true:false},load:function(H,E){var F=this;if(!this.isGeoLoaded()){var G="//geoservice.webengage.com/geoip/?jsoncallback="+encodeURI("webengage.GEO.setGeoData");v.loadScript.apply(s.widgetContainer,[G,function(){v.updateSessionCookieGeoData();F._isLoaded=true;if(typeof H==="function"){H()}},null,function(){if(typeof E==="function"){E()}}])}else{F._isLoaded=true;if(typeof H==="function"){H()}}}});v.extend("BrowserDetect",(function(){var H,J,F,L=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:d.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Windows,Trident",identity:"Explorer",versionSearch:"rv"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],I=[{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"Windows Phone",identity:"Windows Phone"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.userAgent,subString:"Mobile",identity:"Mobile"}],G=[{string:navigator.userAgent,subString:"iPhone",identity:"Mobile"},{string:navigator.userAgent,subString:"iPod",identity:"Mobile"},{string:navigator.userAgent,subString:"Android,Mobile",identity:"Mobile"},{string:navigator.userAgent,subString:"Windows Phone",identity:"Mobile"},{string:navigator.userAgent,subString:"BlackBerry,Mobile",identity:"Mobile"},{string:navigator.userAgent,subString:"BB10,Mobile",identity:"Mobile"},{string:navigator.userAgent,subString:"Android",identity:"Tablet"},{string:navigator.userAgent,subString:"iPad",identity:"Tablet"},{string:navigator.userAgent,subString:"Windows,Tablet",identity:"Tablet"}],E=function(T){for(var P=0;P<T.length;P++){var Q=T[P].string;var S=T[P].prop;this._versionSearchString=T[P].versionSearch||T[P].identity;if(Q){var R=T[P].subString.split(",");var O=false;for(var N=0;N<R.length;N++){if(Q.indexOf(R[N])==-1){O=false;break}O=true}if(O){return T[P].identity}}else{if(S){return T[P].identity}}}},K=function(P){var O=P.indexOf(this._versionSearchString);if(O==-1){return}var N=parseFloat(P.substring(O+this._versionSearchString.length+1));if(H=="Explorer"&&7<=N){if(P.indexOf("Trident/4")!=-1){N=8}else{if(P.indexOf("Trident/5")!=-1){N=9}else{if(P.indexOf("Trident/6")!=-1){N=10}}}}return N},M=function(){if(H&&J&&F){return}H=E(L)||"An unknown browser";J=K(navigator.userAgent)||K(navigator.appVersion)||"an unknown version";F=E(I)||"an unknown OS";_device=E(G)||(v.isSmallScreen()?"Mobile":"Desktop")};return{browser:function(){return M()||H},version:function(){return M()||J},os:function(){return M()||F},device:function(){return M()||_device},is_this_the_worlds_most_annoying_browser:function(){return(typeof a.all!=="undefined"&&!d.opera&&!d.XMLHttpRequest)},ie:function(){return M()||H=="Explorer"},isMobile:function(){var P=this.os(),N=false,Q=["iOS","Android","Windows Phone","Mobile"];for(var O=0;O<Q.length;O++){if(P==Q[O]){N=true;break}}return N}}})());var z={onRun:function(E){return this.bind("run",E)},onLoad:function(E){return this.bind("load",E)},onOpen:function(E){return this.bind("open",E)},onView:function(E){return this.bind("view",E)},onSubmit:function(E){return this.bind("submit",E)},onClick:function(E){return this.bind("click",E)},onComplete:function(E){return this.bind("complete",E)},onClose:function(E){return this.bind("close",E)},onDump:function(E){return this.bind("dump",E)},bind:function(){return v.bind.apply(this,arguments)},unbind:function(){return v.unbind.apply(this,arguments)},executeCallbacks:function(){return v.executeCallbacks.apply(this,arguments)}};v.extend("",(function(){var E=function(){var I={wv:v.getVersion(),licenseCode:m,tzo:(C.configurationMap.tzo||0)};var H=v.getWebengageCookie();I.luid=H.luid;I.ust=H.time;I.lst=H.lst;I.sc=H.sc;I.tpvc=H.tpvc;var G=v.getSessionCookie();I.ref=G.referrer;I.sst=G.sst;I.pvcs=G.pvc;I.suid=G.suid;if(G.landingPage){I.lp=G.landingPage}I.pageTitle=a.title;I.pageURL=d.location.href;I.viewportHeight=v.getWindowHeight();I.viewportWidth=v.getWindowWidth();I.ver=1;return I},F=function(J,L,K){var H="//c.webengage.com"+J;try{if(c.BrowserDetect.ie()){throw new Error("This browser does not support XMLHttpRequest.")}var P=d.XMLHttpRequest;if(typeof P==="undefined"){P=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(U){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(U){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(U){}throw new Error("This browser does not support XMLHttpRequest.")}}var Q=new P();var G=L?"POST":"GET";Q.open(G,H,true);Q.onreadystatechange=function(){if(Q.readyState==4){if(Q.status==200){if(K&&typeof K==="function"){K()}}}};Q.setRequestHeader("Content-type","application/x-www-form-urlencoded");var S=Object.keys(L).map(function(U){return encodeURIComponent(U)+"="+encodeURIComponent(L[U])}).join("&");Q.send(S)}catch(O){try{var N=a.createElement("iframe");var M="WE_XHR_POST_IFRM";a.body.appendChild(N);N.style.display="none";N.contentWindow.name=M;var I=a.createElement("form");I.target=M;I.action=H;I.method="POST";for(var T in L){var R=a.createElement("input");R.type="hidden";R.name=T;R.value=L[T];I.appendChild(R)}a.body.appendChild(I);I.submit();N.onload=function(){if(N.parentNode){N.parentNode.removeChild(N)}}}catch(O){}}};return{dump:function(J,I,K){J=J||"unknown";var H=E();H=v.copy(H,(K||{}),true);H.we_category=(J||"unknown");H.we_event=(I||"unknown");var G=v.stringify(H);G=c.LZString.compressToBase64(G);F("/l.jpg",{data:G})}}})());v.extend("feedback",(function(){var E=[];return{cbid:1,getMobileLoadingDiv:function(G){var F=a.createElement("div");F.id=G||s.widgetContainerId+"-loading";F=c.util.applyCss(F,{position:"fixed",left:(c.util.getWindowWidth()*0.05)+"px",width:(c.util.getWindowWidth()*0.9)+"px",opacity:"1",background:"#f9f9f9",color:"#666","z-index":c.util.getMaxZIndex(),textAlign:"center","padding-top":"20px","padding-bottom":"20px",fontFamily:"Arial, sans-serif",fontSize:"10px",display:"none"});return F},getLoadingDiv:function(G){var F=a.createElement("div");F.id=G||s.widgetContainerId+"-loading";F=c.util.applyCss(F,{fontFamily:"Arial, sans-serif",fontSize:"10px",color:"#666",textDecoration:"none",position:"absolute",textAlign:"center"});return F},getLightBoxBaseDiv:function(){var F=a.createElement("div");c.util.applyCss(F,{display:"block",margin:"0",padding:"0","z-index":c.util.getMaxZIndex(),position:"absolute",overflow:"hidden",top:"0",left:"0",height:a.body.scrollHeight+"px",width:"100%","background-color":"rgba(0, 0, 0, .85)"});F.id=s.widgetContainerId+"-base";return F},getLightBoxContainerDiv:function(){var G=a.createElement("div");c.util.applyCss(G,{display:"block",top:"0",left:"0",width:"100%",height:c.util.getWindowHeight()+"px",position:"absolute",outline:"none !important","-webkit-backface-visibility":"hidden",margin:"0",padding:"0","z-index":c.util.getMaxZIndex(),"-webkit-overflow-scrolling":"touch"});G.setAttribute("tabIndex",-1);G.id=s.widgetContainerId+"-light-box-container";var F=a.createElement("div");c.util.applyCss(F,{display:"block","text-align":"center",position:"absolute",width:"100%",height:"100%",left:"0",top:"0",outline:"none !important","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box",padding:"0 8px",margin:"0","overflow-y":"auto","overflow-x":"hidden"});F.id=s.widgetContainerId+"-light-box-content";G.appendChild(F);return G},render:function(F){return c.withELog(function(){return(new function(){c.feedback.clear();var S=this;S.cbid=1;E[E.length]=S;S.abort=function(){v.abortInstance(this)};S._feedbackOptions={launchType:f["webengage.feedback.launchType"]||"",externalLinkId:f["webengage.feedback.externalLinkId"]||"",alignment:f["webengage.feedback.alignment"]||"",borderColor:f["webengage.feedback.borderColor"]||"",backgroundColor:f["webengage.feedback.backgroundColor"]||"",snapshotEnabled:f["webengage.feedback.snapshotEnabled"]||"",defaultCategory:f["webengage.feedback.defaultCategory"]||"",showAllCategories:(typeof f["webengage.feedback.showAllCategories"]==="boolean"&&!f["webengage.feedback.showAllCategories"])?false:true,showForm:f["webengage.feedback.showForm"]||false,isDemoMode:f["webengage.feedback.isDemoMode"]||f["webengage.isDemoMode"]||false,customData:f["webengage.feedback.customData"]||f["webengage.customData"]||{},formData:f["webengage.feedback.formData"]||f["webengage.formData"]||[],enableCallbacks:f["webengage.feedback.enableCallbacks"]||f["webengage.enableCallbacks"]||false,language:f["webengage.language"]||""};if(F!==e&&F.data!==e&&F.data){var ah=F.data;if(ah.name!==e&&ah.name){S._feedbackOptions.formData.push({name:"name",value:ah.name})}if(ah.email!==e&&ah.email){S._feedbackOptions.formData.push({name:"email",value:ah.email})}if(ah.category!==e&&ah.category){S._feedbackOptions.formData.push({name:"category",value:ah.category})}}var K={feedbackLaunchType:"launchType",feedbackExternalLinkId:"externalLinkId",feedbackButtonAlignment:"alignment",feedbackButtonBorderColor:"borderColor",feedbackButtonBackgroundColor:"backgroundColor",defaultFeedbackCategory:"defaultCategory",showAllFeedbackCategories:"showAllCategories",showFeedbackForm:"showForm",data:"customData",demo:"isDemoMode"};if(F!==e&&!v.isEmptyObject(F)){for(var G in F){var ae=K[G];if(ae!==e&&ae){F[ae]=F[G];delete F[G]}}}S._feedbackOptions=v.copy(S._feedbackOptions,(F?F:{}),true);S.enableCallbacks=(typeof S._feedbackOptions.enableCallbacks==="boolean"?S._feedbackOptions.enableCallbacks:false);v.copy(S,z,true);S.onLoad((S._feedbackOptions.onLoad||f["webengage.feedback.onLoad"]));S.onSubmit((S._feedbackOptions.onSubmit||f["webengage.feedback.onSubmit"]));S.onClose((S._feedbackOptions.onClose||f["webengage.feedback.onClose"]));S.onOpen((S._feedbackOptions.onOpen||f["webengage.feedback.onOpen"]));v.attachEventListners("feedback",S);if(C.feedback&&(C.feedback.isEnabled||S._feedbackOptions.isDemoMode)&&(a.location.protocol=="http:"||(a.location.protocol=="https:"&&C.sslEnabled))&&!C.isFQuotaOver){var T=C.feedback.config,aa={alignment:["right","left"],launchTypes:["feedbackButton","externalLink"],containerCss:{margin:0,padding:0,position:(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?"absolute":"fixed"),border:"5px solid #ccc",backgroundColor:"#f9f9f9",borderWidth:"1px",borderStyle:"solid"},containerRightCss:{right:"0px",borderRightWidth:"0px"},containerLeftCss:{left:"0px",borderLeftWidth:"0px"},commonCss:{margin:0,padding:0,cursor:"pointer",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundPosition:"center 0",display:"block",paddingBottom:"7px",paddingLeft:"3px",paddingRight:"3px",paddingTop:"7px"},tabCssWithIcon:{backgroundPosition:"center bottom",paddingBottom:"33px"},closeCommonCss:{height:"22px",width:"22px",cursor:"pointer",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",position:"absolute",top:"-14px",backgroundImage:"url('"+s.baseStaticUrl+"/images/icons/feedback-widget-close.png')",backgroundColor:"transparent",display:"none"},leftCloseCss:{right:"-14px"},rightCloseCss:{left:"-14px"},feedbackBgImageForDarkBackground:s.baseStaticUrl+"/images/webengage/icons/feedback-tab-bg-dark.png",feedbackBgImageForLightBackground:s.baseStaticUrl+"/images/webengage/icons/feedback-tab-bg-light.png",feedbackTextImage:s.feedbackImageBaseUrl+T.imgPath,sizeCss:{height:T.imgHeight+"px",width:T.imgWidth+"px"},leftCss:{cssFloat:"right",styleFloat:"right"},rightCss:{cssFloat:"left",styleFloat:"left"},loadingCss:{fontFamily:"Arial, sans-serif",fontSize:"10px",color:"#666",textDecoration:"none",position:"absolute",textAlign:"center"},maxWidth:"450px",maxHeight:(c.BrowserDetect.ie()?"349px":"345px")},ac={getButtonCssBasedOnConfig:function(aj,ak){var ai={};ai=v.copy(ai,aa.sizeCss);if(aj=="left"){ai=v.copy(ai,aa.leftCss)}else{ai=v.copy(ai,aa.rightCss)}if(ak){ai=v.copy(ai,aa.tabCssWithIcon)}return ai},getContainerCssBasedOnConfig:function(aj){var ai={};ai=v.copy(ai,aa.containerCss);if(aj=="right"){ai=v.copy(ai,aa.containerRightCss)}else{ai=v.copy(ai,aa.containerLeftCss)}return ai},getCloseCssBasedOnConfig:function(aj){var ai={};if(aj=="right"){ai=v.copy(ai,aa.rightCloseCss)}else{ai=v.copy(ai,aa.leftCloseCss)}return ai},getButtonCssBasedOnBackgroundColor:function(aj){var ai={};if(v.isColorTooLight(aj)){ai=v.copy(ai,{backgroundImage:("url('"+aa.feedbackBgImageForLightBackground+"')")})}else{ai=v.copy(ai,{backgroundImage:("url('"+aa.feedbackBgImageForDarkBackground+"')")})}return ai},getCustomTextImageCss:function(){var ai={};ai=v.copy(ai,{backgroundImage:("url('"+aa.feedbackTextImage+"')")});return ai}},Z=(T.closeImg===e||T.closeImg===null||T.closeImg==="")?(s.baseStaticUrl+"/images/icons/feedback-widget-close.png"):("//s3-ap-southeast-1.amazonaws.com/"+T.closeImg),Y=v.getInitParamValue(S._feedbackOptions,"alignment",T.alignment,aa.alignment),M=v.getInitParamValueAsArray(S._feedbackOptions,"launchType",T.launchType,aa.launchTypes),L=v.getInitParamValueAsArray(S._feedbackOptions,"externalLinkId",T.externalLinkId),Q=v.getInitParamValue(S._feedbackOptions,"backgroundColor",T.backgroundColor),af=v.getInitParamValue(S._feedbackOptions,"borderColor",T.borderColor),ab=v.getInitParamValue(S._feedbackOptions,"snapshotEnabled",((T.snapshotEnabled===e)?true:T.snapshotEnabled)),ad=v.inArray(M,aa.launchTypes[0]),U=T.imgWidth,O=T.imgHeight,R=T.showWeIcon;Q=Q.indexOf("#")===0?Q:("#"+Q);af=af.indexOf("#")===0?af:("#"+af);var W=a.createElement("div");s.widgetContainer.appendChild(W);W.setAttribute("id",s.widgetContainerId+"-content");var ag=W.style;W=v.applyCss(W,aa.containerCss);W=v.applyCss(W,ac.getContainerCssBasedOnConfig(Y));W.style.width=(parseInt(U)+3+3)+"px";var I=(parseInt(O)+7+7+(R?(3+26):0))+"px";ag.borderColor=af;ag.top=(("innerHeight" in d?d.innerHeight:a.documentElement.clientHeight)-parseInt(O))/2+"px";ag.zIndex=(v.getMaxZIndex()+1);var P=a.createElement("div");W.appendChild(P);P.id=s.widgetContainerId+"-close-div";P=v.applyCss(P,aa.closeCommonCss);P=v.applyCss(P,ac.getCloseCssBasedOnConfig(Y));P.style.backgroundImage="url('"+Z+"')";if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){P.style.backgroundImage="";P.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+Z+"')"}var X=a.createElement("div");W.appendChild(X);X.setAttribute("id",s.widgetContainerId+"-content-expand-collapse");var V=X.style;X=v.applyCss(X,aa.commonCss);X=v.applyCss(X,ac.getButtonCssBasedOnConfig(Y,R));X=v.applyCss(X,ac.getButtonCssBasedOnBackgroundColor(Q));if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){V.backgroundImage="";var H=(v.isColorTooLight(Q)?aa.feedbackBgImageForLightBackground:aa.feedbackBgImageForDarkBackground);V.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+H+"')"}V.backgroundColor=Q;V.zIndex=v.getMaxZIndex()+1;if(!ad){W.style.display="none"}var N=a.createElement("div");X.appendChild(N);N.style.width=parseInt(U)+"px";N.style.height=parseInt(O)+"px";N.style.margin="0px";N.style.padding="0px";N=v.applyCss(N,ac.getCustomTextImageCss());if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){N.style.backgroundImage="";V.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+aa.feedbackTextImage+"')"}P.style.zIndex=v.getMaxZIndex()+1;S.close=function(){try{W.removeChild(a.getElementById(s.widgetContainerId+"-loading"))}catch(ai){}try{W.removeChild(a.getElementById(s.widgetContainerId+"-content"))}catch(ai){}try{a.getElementById(s.widgetContainerId+"-content-expand-collapse").isCurrentlyOpen=false}catch(ai){}P.style.display="none";W.style.width=(parseInt(U)+3+3)+"px";if(!ad){X.style.display="none"}};P.onclick=function(){c.withELog(function(){S.close()})};function J(){if(f["webengage.feedback.custom"]){W.style.display="block";W.style.border="none";W.style["background-color"]="transparent";W.style.position="static";W.style.overflow="visible";W.style.width="0px";W.style.height="0px"}else{if(T.mobileLB&&(c.BrowserDetect.isMobile()||v.isSmallScreen())){W.style.display="block";var al=c.feedback.getLightBoxBaseDiv();s.weDataContainer.appendChild(al);var ak=c.feedback.getLightBoxContainerDiv();s.weDataContainer.appendChild(ak);var aj=c.feedback.getMobileLoadingDiv();aj.innerHTML="Loading<br/>please wait ...";s.weDataContainer.appendChild(aj);var am=c.util.getElementHeight(aj);var an=c.util.getWindowHeight();aj.style.top=(an-am)/2+"px";aj.style.display="block"}else{W.style.display="block";W.style.width="300px";var aj=c.feedback.getLoadingDiv();aj=v.applyCss(aj,aa.loadingCss);aj.innerHTML="Loading<br/>please wait ...";W.appendChild(aj);v.alignCenter(aj,W,Y);P.style.display="block"}}S.feedbackLoadStartTime=new Date();var ai=s.widgetDomain+(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?s.loadFeedbackWidgetUrlv3:s.loadFeedbackWidgetUrl);c.feedbackLoadStartTime=new Date();v.withWeJquery(function(){var ao=a.createElement("script");ao.type="text/javascript";ao.src=ai;s.widgetContainer.appendChild(ao)})}X.onclick=function(){c.withELog(function(){J()})};if(L&&L.length>0){(function(){for(var aj=0;aj<L.length;aj++){var ak=L[aj];var ai=a.getElementById(ak);if(ai){ai.onclick=function(al){var am=al||d.event;am.cancelBubble=true;if(am.stopPropagation){am.stopPropagation()}if(am.preventDefault){am.preventDefault()}else{am.returnValue=false}X.onclick();return false}}}})()}a.$FeedbackWidgetInitializer={containerId:s.widgetContainerId,licenseCode:m,appHost:s.feedbackAppHost,minWidth:(parseInt(U)+3+3)+"px",maxWidth:aa.maxWidth,minHeight:I,maxHeight:aa.maxHeight,showFeedbackButton:ad,buttonAlignment:Y,borderColor:af.substring(1),snapshotEnabled:ab,currentInstance:S,mobileLBEnabled:T.mobileLB&&(c.BrowserDetect.isMobile()||v.isSmallScreen()),widgetLanguage:S._feedbackOptions.language};if(S._feedbackOptions.showForm==true){X.onclick()}}else{if(C.feedback&&C.feedback.isEnabled&&a.location.protocol=="https:"&&!C.sslEnabled){c.eLog(null,"error","Feedback - Widget turned off for SSL encrypted page","Feedback - Widget turned off for SSL encrypted page")}}})})},clear:function(){c.withELog(function(){try{s.widgetContainer.removeChild(a.getElementById(s.widgetContainerId+"-content"))}catch(F){}E=[];a.$FeedbackWidgetInitializer=null})},abort:function(){v.abortAllInstances(E)},attachEventListner:function(){var F=this,G=arguments;c.withELog(function(){v.bind.apply(F,G);if(E.length>0){for(var H=0;H<E.length;H++){E[H].enableCallbacks=true;v.bind.apply(E[H],G)}}})}}})());v.extend("ruleExecutor.constants",{SEARCH_ENGINE_REGEXP:{google:{pattern:"^(?:http(s)?://)?(www\\.)?google\\..*/.*$",queryParam:"q"},yahoo:{pattern:"^(?:http(s)?://)?(?:([a-z]{2})\\.)?search\\.yahoo\\.com/.*$",queryParam:"p"},bing:{pattern:"^(?:http(s)?://)?((?:www|[a-z]{2})\\.)?bing\\.com/search\\?.*$",queryParam:"q"},ask:{pattern:"^(?:http(s)?://)?www\\.ask\\.com/.*$",queryParam:"q"},baidu:{pattern:"^(?:http(s)?://)?www\\.baidu\\.com/.*$",queryParam:"wd"},yandex:{pattern:"^(?:http(s)?://)?www\\.yandex\\.com/.*$",queryParam:"text"},duckduckgo:{pattern:"^(?:http(s)?://)?www\\.duckduckgo\\.com/.*$",queryParam:"q"}},SOCIAL_MEDIA_REGEX:"^(?:http(s)?://)?(.*.)?(facebook|twitter|t|pinterest)\\.(com|co)/.*$",XPATH_PLUGIN_FILE:"//d3701cc9l7v9a6.cloudfront.net/js/jquery/wgxpath.install.js"});v.extend("ruleExecutor.dependencies",{XPATH:function(F,G,E){c.XPATH.util.loadXPath(G,E)},GEO:function(F,G,E){c.GEO.load(G,E)}});v.extend("XPATH.util",(function(){return{loadXPath:function(G,F){if((c.BrowserDetect.browser()==="Explorer")&&(!a.evaluate)){var E="//d3701cc9l7v9a6.cloudfront.net/js/jquery/wgxpath.install.js";v.loadScript.apply(s.widgetContainer,[E,function(){wgxpath.install();if(typeof G==="function"){G()}},null,function(){if(typeof F==="function"){F()}}])}else{if(typeof G==="function"){G()}}},isXpathLoaded:function(){return(a.evaluate?true:false)},getXPathElement:function(G){var E=null;if(G&&G.indexOf("|")>-1){var F=G.split("|");G=F[0]+"/@"+F[1]}try{xpathResult=a.evaluate(G,a,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null);E=(xpathResult&&xpathResult.singleNodeValue&&c.util.isElementExists(xpathResult.singleNodeValue))?xpathResult.singleNodeValue:null}catch(H){}return E},evaluateXPathQuery:function(F){var E=c.XPATH.util.getXPathElement(F);if(E){return E.textContent}else{return null}}}})());v.extend("ruleExecutor.dependency.util",{xPathExists:function(){if(c.XPATH.util.isXpathLoaded()){return true}else{var E={};E.type="XPATH";throw E}},geoDataExists:function(){if(c.GEO.isGeoLoaded()){return true}else{var E={};E.type="GEO";throw E}}});v.extend("ruleExecutor.util",(function(E){return{isMatches:function(H,F){if(H){if(H instanceof Array){for(var I=0;I<H.length;I++){if(c.ruleExecutor.util.isMatches(H[I],F)){return true}}}else{if(F instanceof Array){for(var G=0;G<F.length;G++){if(H.match(new RegExp(F[G],"mgi"))){return true}}}else{if(H.match(new RegExp(F,"mgi"))){return true}}}}return false},getCurrentTimeInSec:function(I){var H=new Date(I);var F=H.getHours();var J=H.getMinutes();var G=H.getSeconds();return(F*60*60+J*60+G)},getClientTime:function(){var F=v.getCurrentTime();return c.ruleExecutor.util.getCurrentTimeInSec(F)},getClientDayOfWeek:function(){return v.getCurrentWeekDay()},getPublisherTime:function(){var F=v.getCurrentTime(s.publisherTimeZoneOffset);return c.ruleExecutor.util.getCurrentTimeInSec(F)},isContainsSearchTerms:function(H,I){var G=false;if(typeof H!=="function"||!I||!(I instanceof Array)||I.length<=0){return false}var F=H();if(typeof F!==e&&F){for(var J=0;J<I.length;J++){G=c.ruleExecutor.util.isContains(F,c.ruleExecutor.util.jsTokenizer(I[J]," "),"contains_all");if(typeof G==="boolean"&&G){break}}}return G},isContains:function(K,O,G){var N=K;if(typeof(K)==="function"){N=K()}var M=false;var H=G||"contains_any";if(N!==e&&N){var F=[];if(N instanceof Array){for(var L=0;L<N.length;L++){F[N[L].toLowerCase()]=true}}else{F[N]=true}if(O!==e&&O){if(O instanceof Array){if(H=="contains_all"){for(var J=0;J<O.length;J++){if(F[O[J].toLowerCase()]==true){M=true;continue}M=false;break}}else{for(var I=0;I<O.length;I++){if(F[O[I].toLowerCase()]==true){M=true;break}}}}else{M=F[O.toLowerCase()]==true}}}return M},getReferrers:function(){var G=[];if(a.referrer){G[G.length]=a.referrer.toLowerCase()}var F=v.getSessionCookie();if(F&&F.referrer&&(!a.referrer||F.referrer!=a.referrer)){G[G.length]=F.referrer.toLowerCase()}return G},getCountry:function(){if(c.ruleExecutor.dependency.util.geoDataExists()){return v.getSessionCookie().country||null}},getRegion:function(){if(c.ruleExecutor.dependency.util.geoDataExists()){return v.getSessionCookie().region||null}},getCity:function(){if(c.ruleExecutor.dependency.util.geoDataExists()){return v.getSessionCookie().city||null}},getSearchEngineMatchResult:function(){var I=c.ruleExecutor.util.getReferrers();var F={isSER:false};for(var H in E.SEARCH_ENGINE_REGEXP){for(var G=0;G<I.length;G++){if(c.ruleExecutor.util.isMatches(I[G],E.SEARCH_ENGINE_REGEXP[H].pattern)!=false){F.isSER=true;F.url=I[G];F.queryParam=E.SEARCH_ENGINE_REGEXP[H].queryParam;break}}if(F.isSER===true){break}}return F},isSearchEngineReference:function(){return(c.ruleExecutor.util.getSearchEngineMatchResult()).isSER},isSocialMediaReference:function(){return c.ruleExecutor.util.isMatches(c.ruleExecutor.util.getReferrers(),E.SOCIAL_MEDIA_REGEX)},isFirstTime:function(){var F=v.getSessionCookie();return(F&&(typeof F.isFirstTime==="boolean"&&F.isFirstTime))?true:false},getSearchTerms:function(){var H=null;var F=c.ruleExecutor.util.getSearchEngineMatchResult();if(F.isSER){var G=decodeURI(c.ruleExecutor.util.getParamValue(F.url,F.queryParam));if(G){H=c.ruleExecutor.util.jsTokenizer(G," ")}}return H},jsTokenizer:function(I,K){var J=[];if(I!==e&&I){var H=v.escapeForRegExp(",\r\n");if(K!==e&&K){if(K instanceof Array){H=v.escapeForRegExp(K.join(""))}else{H=v.escapeForRegExp(K)}}I=I.replace(new RegExp("["+H+"]","g"),"\n");var F=I.split(/\n/g);for(var G=0;G<F.length;G++){if(F[G]!=""){J[J.length]=F[G]}}}return J},getParamValue:function(G,I){var J="";var H=new RegExp("[\\?&]"+I+"=([^&#]*)");var F=H.exec(G);if(F!==null){J=F[1]}return J},escapeForRegExp:function(F){return v.escapeForRegExp(F)},getTotalPageView:function(){var F=v.getSessionCookie();return(F&&F.pvc)?F.pvc:1},sampling:function(F){var G=this.entityId||F;if(G){var H=v.getWebengageCookie(),I=v.getHashCode(G+H.luid);return Math.abs(I%100)}return 0},getSessionCookieReferer:function(){var F=v.getSessionCookie();var G=F.referrer;if(!G){return null}return G},getXpathStringResult:function(F){if(c.ruleExecutor.dependency.util.xPathExists()){return c.XPATH.util.evaluateXPathQuery(F)}},getXpathIntegerResult:function(G){if(c.ruleExecutor.dependency.util.xPathExists()){var F=c.XPATH.util.evaluateXPathQuery(G);if(F){return parseFloat(F)}else{return null}}},loadDependency:function(F,H,J,G){var I=c.ruleExecutor.dependencies[F];if(I&&(typeof I==="function")){I(H,J,G)}else{if(G&&typeof G=="function"){G()}}}}})(c.ruleExecutor.constants));v.extend("ruleExecutor",(function(H,G){var E={};var F=function(){E={referer:H.getReferrers,url:v.getClientPageUrl(),cookie:function(K){return v.getCookie(K,true)},country:H.getCountry,region:H.getRegion,city:H.getCity,time:"",isFirstTime:H.isFirstTime,isSER:H.isSearchEngineReference,isSMR:H.isSocialMediaReference,searchTerms:H.getSearchTerms,os:c.BrowserDetect.os,device:c.BrowserDetect.device,browser:c.BrowserDetect.browser,browser_version:c.BrowserDetect.version,endUserTime:H.getClientTime,publisherTime:H.getPublisherTime,totalPageView:H.getTotalPageView,sampling:H.sampling,contentXPathString:H.getXpathStringResult,contentXPathInteger:H.getXpathIntegerResult,contentXPathNode:H.getXpathStringResult,isDirectVisitor:H.getSessionCookieReferer,dayOfWeek:H.getClientDayOfWeek};var J={};for(var I in E){if(E.hasOwnProperty(I)){J["we_wk_"+I]=E[I]}}v.copy(E,J)};F();return{execute:function(J,L,I){var K=v.copy({},E);K=v.copy(K,(I?I:{}),true);K.entityId=J;L=(L!==e)?L:true;return(new Function("_weUtil","_ruleUtil","_constants","operands","return ("+L+");")(v,H,G,K))},loadOperands:function(){F()}}})(c.ruleExecutor.util,c.ruleExecutor.constants));v.extend("survey",(function(){var I=[],J=function(S,M){if(S!==e&&S){var T=this,P=C.survey.config,R=P.theme||"",N="320px",W="1px",V=a.createElement("div");if(T._surveyOptions.width){var Q=parseInt(T._surveyOptions.width,10);if(!isNaN(Q)){N=Q+"px"}}T.height=W;T.width=N;T.surveyConfigDto=P;T.theme=R;T.surveyEId=S;T._weProperties=s;T.showOnExit=(typeof M==="boolean"?M:false);T.isMobileSurvey=(typeof isMobileSurvey=="boolean"?isMobileSurvey:false);var U=T._surveyOptions.scope[S]||T._surveyOptions.scope.all||null;if(U){T.scope=(U.scope?U.scope:"");T.scopeType=(U.scopeType?U.scopeType:"")}s.widgetContainer.appendChild(V);V.setAttribute("id",s.widgetContainerId+"-survey-content");a.$SurveyWidgetInitializer={currentInstance:T,containerId:s.widgetContainerId,licenseCode:m,appHost:s.surveyAppHost,width:parseInt(N,10)};var O=s.widgetDomain+(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?s.loadSurveyWidgetUrlv3:s.loadSurveyWidgetUrl(T.layoutAttributes.id));v.withWeJquery(function(){var X=a.createElement("script");X.type="text/javascript";X.src=O;s.widgetContainer.appendChild(X)})}},H=function(P,R,M){if(P!==e&&P){if(typeof P==="object"){if(P instanceof Array){for(var N=0;N<P.length;N++){H(P[N],R,M)}}else{var O=P.scope;if(O){var Q=P.surveyIds;if(Q!==e&&Q instanceof Array&&Q.length>0){for(j=0;j<Q.length;j++){M[Q[j]]={scope:O,scopeType:(P.scopeType||"")}}}else{M.all={scope:O,scopeType:(P.scopeType||"")}}}}}else{M.all={scope:P,scopeType:(R||"")}}}},E=function(T,O,W){if(T&&T.length>0){var ak=(new Array()).concat(T);var an=ak[0],aa=v.getSessionCookie(),ag=v.getWebengageCookie(),Z=v.getInitParamValue(W._surveyOptions,"alignment",C.survey.config.alignment,["left","right"]),Y=an,ad=O[Y].ruleCode,ae=O[Y]["la"],P=O[Y].startTimestamp,R=O[Y].endTimestamp,S=(!W._surveyOptions.skipRules&&typeof O[Y].showOnExit==="boolean")?O[Y].showOnExit:false,U=((W._surveyOptions.skipRules||S)?0:(O[Y].totalTimeOnSite?O[Y].totalTimeOnSite-((new Date()).getTime()-(aa.sst||0)):0)),am=((W._surveyOptions.skipRules||S)?0:((parseInt(W._surveyOptions.delay,10)>=0)?parseInt(W._surveyOptions.delay,10):Math.max(U,O[Y].timeSpent))),ai=O[Y].maxTimesPerUser,Q=W._surveyOptions.scope[Y]||W._surveyOptions.scope.all||null,af=Y+(Q&&Q.scope&&(Q.scopeType+"").toUpperCase()!="GLOBAL"?"["+v.escapeScopeChars(Q.scope)+"]":""),aj=v.escapeForRegExp(af),N=O[Y].mobile,M=O[Y].sampling||100;if(!W._surveyOptions.isDemoMode){if(typeof N!=="undefined"&&N&&!c.BrowserDetect.isMobile()){T.splice(0,1);return E(T,O,W)}if(!W._surveyOptions.forcedRender&&((aa&&aa.closedSurveys!==e&&(aa.closedSurveys.match("##"+aj+"##")||aa.closedSurveys.match("##"+aj+"$")))||(ag&&ag.takenSurveys!==e&&(ag.takenSurveys.match("##"+aj+"##")||ag.takenSurveys.match("##"+aj+"$"))))){ak.splice(0,1);return E(ak,O,W)}var ac=c.util.getTotalTimesShown(Y,"survey");if(!W._surveyOptions.forcedRender&&ai!==e){if(ai<=ac){ak.splice(0,1);return E(ak,O,W)}}var V={timeSpent:am,showOnExit:S,maxTimesPerUser:ai,startTimestamp:P,endTimestamp:R,ruleCode:ad,layoutAttributes:ae,sampling:M};G(Y,V,W,function(){ak.splice(0,1);return E(ak,O,W)})}else{var V={timeSpent:am,showOnExit:S,maxTimesPerUser:ai,startTimestamp:P,endTimestamp:R,ruleCode:ad,layoutAttributes:ae,sampling:M};if(!W.surveysToExecuteData){W.surveysToExecuteData={}}W.surveysToExecuteData[Y]=V;ak.splice(0,1);return E(ak,O,W)}}else{if(W.surveysToExecuteData){var al=null;var ah=[];for(var an in W.surveysToExecuteData){var ab=an;ah[ah.length]=ab;al=((al==null||al>W.surveysToExecuteData[ab]["timeSpent"])?W.surveysToExecuteData[ab]["timeSpent"]:al)}var X=W.startExecutionTime?(new Date()).getTime()-W.startExecutionTime:0;W.totalTimeElapsed=W.totalTimeElapsed+X;W.minTimespentVal=(al-X<0)?0:al-X;return K(ah,W.surveysToExecuteData,W)}}},G=function(M,Q,R,U){try{if(Q.startTimestamp||Q.endTimestamp){if(c.ruleExecutor.dependency.util.geoDataExists()){var T=v.getSessionCookie(),S=(new Date()).getTime()+(T.tsD&&!isNaN(T.tsD)?parseInt(T.tsD,10):0),P=Q.startTimestamp,N=Q.endTimestamp;if(N<S||S<P){return U()}}}if((R._surveyOptions.skipRules)||(!Q.ruleCode)||(c.ruleExecutor.execute(M,Q.ruleCode,R._surveyOptions.ruleData))){if(!R.surveysToExecuteData){R.surveysToExecuteData={}}R.surveysToExecuteData[M]=Q}return U()}catch(O){if(O&&O.type){c.ruleExecutor.util.loadDependency(O.type,Q,function(){G(M,Q,R,U)},U)}else{c.eLog(O);U()}}},L=function(P,N,Q,M,O){totlatTimeElapsed=0;timespent=0;if(!Q){if(arguments&&arguments[0]){timespent=N||0}totlatTimeElapsed=O.totalTimeElapsed+O.minTimespentVal}c.setTimeout(function(){J.apply(O,[P,Q])},((timespent-totlatTimeElapsed)<0?0:(timespent-totlatTimeElapsed)))},F=function(S,O){var R=this;for(var P=0;P<S.length;P++){var Q=S[0];var N=O[Q].sampling||100;var M=c.ruleExecutor.util.sampling(Q);if(N>=M){return Q}else{c.util.markEntityAsShown(Q,"survey",R,true);c.setTimeout(function(){R.dump("abs_view",{id:Q})},10)}}},K=function(M,N,O){c.setTimeout(function(){if(!O._surveyOptions.forcedRender){var P=[];for(var R=0;R<M.length;R++){if(R>0){P[P.length]="&"}P[P.length]="surveyIds="+M[R]}var Q=s.findAllTakenSurveysUrl()+"&"+P.join("")+(O._surveyOptions.scope?"&scope="+encodeURIComponent(v.stringify(O._surveyOptions.scope)):"");v.loadScript.apply(s.widgetContainer,[Q,function(U,W,V){var ab=[],X={};if(typeof we_notToExecuteSurveyIdsMap!="undefined"){if(we_notToExecuteSurveyIdsMap.takenSurveyIds!==e&&we_notToExecuteSurveyIdsMap.takenSurveyIds.length>0){for(var T=0;T<we_notToExecuteSurveyIdsMap.takenSurveyIds.length;T++){var ac=O._surveyOptions.scope[we_notToExecuteSurveyIdsMap.takenSurveyIds[T]]||O._surveyOptions.scope.all||null;var ae=(ac&&ac.scope?ac.scope:"");var aa=(ac&&ac.scopeType?ac.scopeType:"");X[we_notToExecuteSurveyIdsMap.takenSurveyIds[T]]=true;v.markSurveyAsTaken((we_notToExecuteSurveyIdsMap.takenSurveyIds[T]+(ae&&(aa+"").toUpperCase()!="GLOBAL"?"["+v.escapeScopeChars(ae)+"]":"")))}}if(we_notToExecuteSurveyIdsMap.inactiveSurveyIds!==e&&we_notToExecuteSurveyIdsMap.inactiveSurveyIds.length>0){for(var Z=0;Z<we_notToExecuteSurveyIdsMap.inactiveSurveyIds.length;Z++){X[we_notToExecuteSurveyIdsMap.inactiveSurveyIds[Z]]=true}}}for(var ad=0;ad<W.length;ad++){if(!X[W[ad]]){ab[ab.length]=W[ad]}}if(ab.length>0){var Y=F.apply(O,[ab,U]);if(Y){O.layoutAttributes=U[Y]["layoutAttributes"];L(Y,(U[Y]["timeSpent"]||0),U[Y]["showOnExit"],U[Y]["maxTimesPerUser"],O)}}},[N,M,O.totalTimeElapsed]])}else{var S=F.apply(O,[M,N]);O.layoutAttributes=N[S]["layoutAttributes"];L(S,(N[S]["timespent"]||0),N[S]["showOnExit"],N[S]["maxTimesPerUser"],O)}},O.minTimespentVal)};return{cbid:1,render:function(M){return c.withELog(function(){return(new function(){c.survey.clear();var Q=this;Q.cbid=1;I[I.length]=Q;Q.abort=function(){v.abortInstance(this)};var O={surveyId:f["webengage.survey.surveyId"]||"",skipRules:f["webengage.survey.skipRules"]||false,forcedRender:f["webengage.survey.forcedRender"]||false,delay:f["webengage.survey.delay"]||-1,customData:f["webengage.survey.customData"]||f["webengage.customData"]||{},ruleData:f["webengage.survey.ruleData"]||f["webengage.ruleData"]||{},isDemoMode:f["webengage.survey.isDemoMode"]||f["webengage.isDemoMode"]||false,alignment:f["webengage.survey.alignment"]||"",scope:f["webengage.survey.scope"]||f["webengage.scope"]||"",scopeType:f["webengage.survey.scopeType"]||f["webengage.scopeType"]||"",enableCallbacks:f["webengage.survey.enableCallbacks"]||f["webengage.enableCallbacks"]||false,width:f["webengage.survey.width"]};var W={showAllClosedAndTakenSurveys:"forcedRender",data:"customData",demo:"isDemoMode"};if(M!==e&&!v.isEmptyObject(M)){for(var N in M){var R=W[N];if(R!==e&&R){M[R]=M[N];delete M[N]}}}Q._surveyOptions=v.copy(O,(M?M:{}),true);Q._surveyOptions.forcedRender=typeof Q._surveyOptions.forcedRender==="boolean"?Q._surveyOptions.forcedRender:false;if(Q._surveyOptions.forcedRender){Q._surveyOptions.scope=(new Date()).getTime();Q._surveyOptions.scopeType="session"}var P={};H(Q._surveyOptions.scope,Q._surveyOptions.scopeType,P);Q._surveyOptions.scope=P||"";Q.enableCallbacks=(typeof Q._surveyOptions.enableCallbacks==="boolean"?Q._surveyOptions.enableCallbacks:false);if(C.survey&&(C.survey.isEnabled||Q._surveyOptions.isDemoMode)&&!v.isEmptyObject(C.survey.ruleMap)&&(a.location.protocol=="http:"||(a.location.protocol=="https:"&&C.sslEnabled))&&!C.isSRQuotaOver){v.copy(Q,z,true);Q.onLoad((Q._surveyOptions.onLoad||f["webengage.survey.onLoad"]));Q.onSubmit((Q._surveyOptions.onSubmit||f["webengage.survey.onSubmit"]));Q.onClose((Q._surveyOptions.onClose||f["webengage.survey.onClose"]));Q.onOpen((Q._surveyOptions.onOpen||f["webengage.survey.onOpen"]));Q.onComplete((Q._surveyOptions.onComplete||f["webengage.survey.onComplete"]));Q.dump=function(ad,Z){var ac=this;var ab={id:ac.surveyEId,layoutId:ac.layout};v.copy(ab,(Z||{}),true);ab.tvc=v.getTotalTimesShown(ab.id,"survey",false,(ad==="abs_view"?true:false));ab.tvcs=v.getTotalTimesShown(ab.id,"survey",true,(ad==="abs_view"?true:false));if(!v.isEmptyObject(ac.layoutAttributes)){ab.layoutAttrs=ac.layoutAttributes}if(ac.theme){ab.theme=ac.theme}if(ac.showOnExit){ab.showOnExit=ac.showOnExit}if(!v.isEmptyObject(ac._surveyOptions.ruleData)){var X=ac._surveyOptions.ruleData;ab.ruleData={};for(var Y in X){if(X[Y]&&X[Y].constructor==Date){ab.ruleDataDate=ab.ruleDataDate||{};ab.ruleDataDate[Y]=X[Y];continue}ab.ruleData[Y]=X[Y]}}if(!v.isEmptyObject(ac._surveyOptions.customData)){var aa=ac._surveyOptions.customData;ab.customData={};for(var Y in aa){if(aa[Y]&&aa[Y].constructor==Date){ab.customDataDate=ab.customDataDate||{};ab.customDataDate[Y]=aa[Y];continue}ab.customData[Y]=aa[Y]}}this.executeCallbacks("dump",ab,ad);c.dump("survey",ad,ab)};v.attachEventListners("survey",Q);Q.totalTimeElapsed=0;var S=C.survey.ruleMap,V=C.survey.order,T=Q._surveyOptions.surveyId;if(T&&S[T]){var U=[];U[0]=T;V=U}Q.startExecutionTime=(new Date()).getTime();E(V,S,Q)}else{if(C.survey&&C.survey.isEnabled&&a.location.protocol=="https:"&&!C.sslEnabled){c.eLog(null,"error","Survey - Widget turned off for SSL encrypted page","Survey - Widget turned off for SSL encrypted page")}}})})},clear:function(){c.withELog(function(){try{if(a.getElementById(s.widgetContainerId+"-base")){var M=a.getElementsByTagName("webengagedata")[0]}else{s.widgetContainer.removeChild(a.getElementById(s.widgetContainerId+"-survey-content"))}}catch(N){}a.$SurveyWidgetInitializer=null;I=[]})},abort:function(){v.abortAllInstances(I)},attachEventListner:function(){var M=this,N=arguments;c.withELog(function(){v.bind.apply(M,N);if(I.length>0){for(var O=0;O<I.length;O++){I[O].enableCallbacks=true;v.bind.apply(I[O],N)}}})}}})());v.extend("IFRAMES",(function(){var E=[];return{create:function(H,J,L){this.remove(H);var M=L||{};var F;try{F=a.createElement('<iframe name="'+H+'">')}catch(K){F=a.createElement("iframe");F.name=H}F.id=H;if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){F.src="javascript:void(0);"}F.frameBorder=M.frameBorder||"0";F.marginHeight=M.marginHeight||"0";F.marginWidth=M.marginWidth||"0";F.allowTransparency=M.allowTransparency||"true";var G=F.style;G.zIndex=(v.getMaxZIndex()+1);G.position="absolute";G.backgroundColor=M.backgroundColor||"transparent";G.bottom=M.bottom||"0px";G.right=M.right||"0px";G.border=M.border||"none";G.overflow=M.overflow||"hidden";G.visibility=M.visibility||"hidden";var I=J||s.widgetContainer;I.appendChild(F);E[H]=F;try{F.contentWindow.name}catch(K){c.eLog(K);F.src='javascript:(function () {document.open();document.domain="'+a.domain+'";document.close();})();'}if(typeof(M.onload)==="function"){v.addListener(F,"load",M.onload)}return F},get:function(F){return E[F]},resize:function(G,F,H){var I=c.IFRAMES.get(G);I.style.height=F+"px"},remove:function(F){var G=c.IFRAMES.get(F);if(G){if(G.parentNode){G.parentNode.removeChild(G)}}if(d.frames[F]){delete d.frames[F]}delete E[F]},creatCallbackFrame:function(I,G,L,F){var K={};if(typeof(F)==="function"){K.onload=function(){c.withELog(function(){var O=E[I];if(!O.widgetCallBackStatus||O.widgetCallBackStatus===0){O.widgetCallBackStatus=1}else{if(O.widgetCallBackStatus===1){O.contentWindow.location="about:blank";O.widgetCallBackStatus=2}else{if(O.widgetCallBackStatus===2){var P=(new Date()).getTime()+"CB";if(!c.IFRAMES.CB){c.IFRAMES.CB={}}c.IFRAMES.CB[P]=function(Q){setTimeout(function(){if(Q!==e&&Q!==""){try{var S=v.parseJSON(Q);if(S!==null){if(S.eventName!==e){F(S.eventName,S.data)}}}catch(R){c.eLog(R)}}O.widgetCallBackStatus=0;c.IFRAMES.remove(I);O=c.IFRAMES.creatCallbackFrame(I,G,L,F)},10)};try{var M=O.contentWindow.name;c.IFRAMES.CB[P](M)}catch(N){c.eLog(N);O.src="javascript:(function () {document.write('<script>var _data=window.name;document.domain=\""+a.domain+'";setTimeout(function(){window.parent.webengage.IFRAMES.CB["'+P+"\"](_data);}, 10);<\/script>')})();"}}}}})}}var J=c.IFRAMES.create(I,G,K);var H=J.style;H.height=0;H.width=0;if(L){J.src=L}return J}}})());v.extend("notification",(function(){var I=[],F=function(Q,P,O,K){var S=this;if(Q||S._notificationOptions.previewJson!==e){S.notificationId=S.notificationEId=Q;S.showOnExit=K;S.layout=P||(S._notificationOptions.previewJson&&S._notificationOptions.previewJson.layout?S._notificationOptions.previewJson.layout:"");var R=S.executeCallbacks("run",S);if(typeof R==="boolean"&&!R){return}var M=c.IFRAMES.create(s.widgetContainerId+"-notification-frame",s.widgetContainer);M.style.top="-1000px";M.style.left="-1000px";var U=v.getSessionCookie();var N=null;if(M.contentDocument){N=M.contentDocument}else{if(M.contentWindow){N=M.contentWindow.document}else{if(M.document){N=M.document}}}N.open();var L=(S.layout===""?"notification-base.css":S.layout+"-notification-base.css");var J=(c.BrowserDetect.ie()&&c.BrowserDetect.version()<8)?'<link rel="stylesheet" type="text/css" href="//d3701cc9l7v9a6.cloudfront.net/css/responsive/assets/css/font/webengage/widget-font-ie7/ie7.css?v=404.00" media="screen"/><script type="text/javascript" src="//d3701cc9l7v9a6.cloudfront.net/css/responsive/assets/css/font/webengage/widget-font-ie7/ie7.js?v=404.00"><\/script><style type="text/css">.icon-large{font-size:1.3333333333333333em;margin-top:-4px;padding-top:3px;margin-bottom:-4px;padding-bottom:3px;vertical-align:middle;}.icon-extra-large{font-size:2em;margin-top:-4px;padding-top:3px;margin-bottom:-4px;padding-bottom:3px;vertical-align:middle;}</style>':"";var T=(c.BrowserDetect.ie()&&c.BrowserDetect.version()===8)?'<style type="text/css">.icon-large{font-size:1.3333333333333333em;margin-top:-4px;padding-top:3px;margin-bottom:-4px;padding-bottom:3px;vertical-align:middle;}.icon-extra-large{font-size:2em;margin-top:-4px;padding-top:3px;margin-bottom:-4px;padding-bottom:3px;vertical-align:middle;}</style>':"";N.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="cache-control" content="max-age=0" /><meta http-equiv="cache-control" content="no-cache" /><meta http-equiv="pragma" content="no-cache" /><meta http-equiv="content-type" content="text/html; charset=utf-8"/><link id="widget-font-id" rel="stylesheet" type="text/css" href="//d3701cc9l7v9a6.cloudfront.net/css/responsive/assets/css/font/webengage/widget-font.css?v=404.00" media="screen"/><link rel="stylesheet" type="text/css" href="//d3701cc9l7v9a6.cloudfront.net/css/webengage/notification/'+L+'?v=404.00" media="screen"/>'+J+T+'<script type="text/javascript">try{window.parent.window.name}catch(e){document.domain="'+a.domain+'";};<\/script><script type="text/javascript" src="//d3701cc9l7v9a6.cloudfront.net/js/jquery/jquery-1.3.2.min.js"><\/script></head><body class="notification-body"><script type="text/javascript">window.onload = function () { (function(d){ var _script = d.createElement("script"); _script.type = "text/javascript"; _script.src = "'+s.widgetDomain+s.notificationWidgetScriptUrl+'"; d.body.appendChild(_script); })(document);};<\/script></body></html>');N.close();c.setTimeout(function(){if(S._notificationOptions.previewJson!==e){N.$NotificationWidgetInitializer={currentInstance:S,notificationVersion:O,containerId:s.widgetContainerId,licenseCode:m,appHost:s.baseWebEngageUrl,widgetDomain:s.widgetDomain,previewJson:S._notificationOptions.previewJson}}else{N.$NotificationWidgetInitializer={currentInstance:S,notificationVersion:O,containerId:s.widgetContainerId,licenseCode:m,appHost:s.baseWebEngageUrl,widgetDomain:s.widgetDomain,browser:c.BrowserDetect.browser(),browserVersion:c.BrowserDetect.version(),os:c.BrowserDetect.os(),country:U.country||"",city:U.city||"",region:U.region||"",pageTitle:a.title,ip:U.ip,referrer:a.referrer}}},0)}},E=function(O,K,Q){if(O&&O.length>0){var U=(new Array()).concat(O);var ad=U[0],Y=v.getWebengageCookie(),S=v.getSessionCookie(),J=ad,aa=K[J].layout,M=(webengage_fs_configurationMap.config.notificationConfig.wl?"W":"N")+K[J].version,X=K[J].ruleCode,L=(!Q._notificationOptions.skipRules&&typeof K[J].showOnExit==="boolean"?K[J].showOnExit:false),N=((Q._notificationOptions.skipRules||L)?0:((K[J].totalTimeOnSite?K[J].totalTimeOnSite-((new Date()).getTime()-(S.sst||0)):0))),ac=((Q._notificationOptions.skipRules||L)?0:((parseInt(Q._notificationOptions.delay,10)>=0)?parseInt(Q._notificationOptions.delay,10):Math.max(N,K[J].timespent))),P=K[J].skipTargetPage,V=K[J].actionLinks,ab=K[J].maxTimesPerUser,T=K[J].mobile;if(!Q._notificationOptions.isDemoMode){if(typeof T!=="undefined"&&T&&!c.BrowserDetect.isMobile()){U.splice(0,1);return E(U,K,Q)}if(!Q._notificationOptions.forcedRender&&((S&&S.closedNIds!==e&&S.closedNIds.indexOf("##"+J)>=0)||(Y&&Y.takenNIds!==e&&Y.takenNIds.indexOf("##"+J)>=0))){U.splice(0,1);return E(U,K,Q)}if(P&&V instanceof Array&&V.length>0){for(var Z in V){var R=a.createElement("a");R.href=V[Z];V[Z]="^"+v.escapeForRegExp(R.href)+"$";R=null}if(c.ruleExecutor.util.isMatches(v.getClientPageUrl(),V)){U.splice(0,1);return E(U,K,Q)}}var W=c.util.getTotalTimesShown(J,"notification");if(!Q._notificationOptions.isDemoMode&&!Q._notificationOptions.forcedRender&&ab!==e){if(ab<=W){U.splice(0,1);return E(U,K,Q)}}K[J]["timeSpent"]=ac;K[J]["showOnExit"]=L;H(J,K[J],Q,function(){U.splice(0,1);return E(U,K,Q)})}else{K[J]["timeSpent"]=ac;K[J]["showOnExit"]=L;G(J,K[J],Q)}}},H=function(P,J,Q,U){try{if(J.startTimestamp||J.endTimestamp){if(c.ruleExecutor.dependency.util.geoDataExists()){var S=v.getSessionCookie();var R=(new Date()).getTime()+(S.tsD&&!isNaN(S.tsD)?parseInt(S.tsD,10):0);var N=J.startTimestamp,K=J.endTimestamp;if(K<R||R<N){return U()}}}if((Q._notificationOptions.skipRules)||(!J.ruleCode)||(c.ruleExecutor.execute(P,J.ruleCode,Q._notificationOptions.ruleData))){var L=Q.startExecutionTime?(new Date()).getTime()-Q.startExecutionTime:0;Q.totalTimeElapsed=Q.totalTimeElapsed+L;var O=J.sampling||100;var T=c.ruleExecutor.util.sampling(P);if(O>=T){return G(P,J,Q)}else{c.util.markEntityAsShown(P,"notification",Q,true);c.setTimeout(function(){Q.dump("abs_view",{id:P})},10);return U()}}else{return U()}}catch(M){if(M&&M.type){c.ruleExecutor.util.loadDependency(M.type,J,function(){H(P,J,Q,U)},U)}else{c.eLog(M);U()}}},G=function(M,K,L){var J=K.timeSpent||0;function N(){v.withWeJquery(function(){c.setTimeout(function(){F.apply(L,[M,K.layout,K.version,K.showOnExit])},(K.showOnExit?0:((J-L.totalTimeElapsed)<0?0:(J-L.totalTimeElapsed))))})}c.GEO.load(N,N)};return{cbid:1,render:function(J){return c.withELog(function(){return(new function(){c.notification.clear();var P=this;P.cbid=1;I[I.length]=P;P.abort=function(){v.abortInstance(this)};var L={notificationId:f["webengage.notification.notificationId"]||"",skipRules:f["webengage.notification.skipRules"]||false,delay:f["webengage.notification.delay"]||-1,isDemoMode:f["webengage.notification.isDemoMode"]||f["webengage.isDemoMode"]||false,customData:f["webengage.notification.customData"]||f["webengage.customData"]||{},ruleData:f["webengage.notification.ruleData"]||f["webengage.ruleData"]||{},tokens:f["webengage.notification.tokens"]||f["webengage.tokens"]||{},previewJson:f["webengage.notification.previewJson"],forcedRender:f["webengage.notification.forcedRender"]||false,enableCallbacks:f["webengage.notification.enableCallbacks"]||f["webengage.enableCallbacks"]||false};var M={data:"customData",demo:"isDemoMode"};if(J!==e&&!v.isEmptyObject(J)){for(var K in J){var Q=M[K];if(Q!==e&&Q){J[Q]=J[K];delete J[K]}}}P._notificationOptions=v.copy(L,(J?J:{}),true);P.enableCallbacks=(typeof P._notificationOptions.enableCallbacks==="boolean"?P._notificationOptions.enableCallbacks:false);v.copy(P,z,true);P.onRun((P._notificationOptions.onRun||f["webengage.notification.onRun"]));P.onLoad((P._notificationOptions.onLoad||f["webengage.notification.onLoad"]));P.onClick((P._notificationOptions.onClick||f["webengage.notification.onClick"]));P.onClose((P._notificationOptions.onClose||f["webengage.notification.onClose"]));P.onOpen((P._notificationOptions.onOpen||f["webengage.notification.onOpen"]));v.attachEventListners("notification",P);P.dump=function(Z,V){var Y=this;var X={id:Y.notificationId,layoutId:Y.layout};v.copy(X,V||{},true);X.tvc=v.getTotalTimesShown(X.id,"notification",false,(Z==="abs_view"?true:false));X.tvcs=v.getTotalTimesShown(X.id,"notification",true,(Z==="abs_view"?true:false));if(!v.isEmptyObject(Y.layoutAttributes)){X.layoutAttrs=Y.layoutAttributes}if(!v.isEmptyObject(Y.config)){X.theme=Y.config}if(!v.isEmptyObject(Y._notificationOptions.tokens)){X.tokens=v.copy({},Y._notificationOptions.tokens)}if(!v.isEmptyObject(Y._notificationOptions.ruleData)){var T=Y._notificationOptions.ruleData;X.ruleData={};for(var U in T){if(T[U]&&T[U].constructor==Date){X.ruleDataDate=X.ruleDataDate||{};X.ruleDataDate[U]=T[U];continue}X.ruleData[U]=T[U]}}if(!v.isEmptyObject(Y._notificationOptions.customData)){var W=Y._notificationOptions.customData;X.customData={};for(var U in W){if(W[U]&&W[U].constructor==Date){X.customDataDate=X.customDataDate||{};X.customDataDate[U]=W[U];continue}X.customData[U]=W[U]}}if(Y.clickedCTA){X.cta=Y.clickedCTA}this.executeCallbacks("dump",X,Z);c.dump("notification",Z,X)};if(P._notificationOptions.previewJson!==e){v.withWeJquery(function(){F.apply(P)})}else{if(C.notification&&(C.notification.isEnabled||P._notificationOptions.isDemoMode)&&(a.location.protocol=="http:"||(a.location.protocol=="https:"&&C.sslEnabled))&&!C.isNQuotaOver){var R=C.notification.order,N=C.notification.ruleMap;P.totalTimeElapsed=0;var O=P._notificationOptions.notificationId;if(O&&N[O]){var S=[];S[0]=O;R=S}P.startExecutionTime=(new Date()).getTime();E(R,N,P)}else{if(C.notification&&C.notification.isEnabled&&a.location.protocol=="https:"&&!C.sslEnabled){c.eLog(null,"error","Notification - Widget turned off for SSL encrypted page","Notification - Widget turned off for SSL encrypted page")}}}})})},getNotificationFrame:function(){return a.getElementById(s.widgetContainerId+"-notification-frame")},resize:function(L){var K=a.getElementById(s.widgetContainerId+"-notification-frame");K.height=L.height||K.contentWindow.document.body.scrollHeight;K.width=L.width||K.contentWindow.document.body.scrollWidth;var J=K.style;J.visibility="visible";J.height=parseInt(L.height||K.contentWindow.document.body.scrollHeight)+"px";J.width=parseInt(L.width||K.contentWindow.document.body.scrollWidth)+"px";J.top="auto";J.bottom="0px";J.left="auto";if("right"==L.launchType){J.right="0px"}else{J.left="0px"}},clear:function(){var J=this;c.withELog(function(){try{c.IFRAMES.remove(s.widgetContainerId+"-notification-frame")}catch(K){}I=[]})},abort:function(){v.abortAllInstances(I)},attachEventListner:function(){var J=this,K=arguments;c.withELog(function(){v.bind.apply(J,K);if(I.length>0){for(var L=0;L<I.length;L++){I[L].enableCallbacks=true;v.bind.apply(I[L],K)}}})}}})());v.extend("",{abort:function(){c.withELog(function(){c.feedback.abort();c.survey.abort();c.notification.abort()})}});v.extend("",{init:function(E){var F=function(G){if(E[G]!==e&&E[G]){f["webengage."+G]=E[G]}};F("licenseCode");F("language");F("isDemoMode");F("delay");f["webengage.widgetVersion"]="3.0";if(f["webengage.licenseCode"]!==e&&f["webengage.licenseCode"]){v.onDocReady(t)}return c}});v.extend("",{onReady:function(E){if(E!==e&&typeof E==="function"){f["webengage.oldOnReady"]=E}}});v.extend("",{render:function(E){if(E){if(E.showFeedbackByDefault!==e&&!E.showFeedbackByDefault){f["webengage.feedback.defaultRender"]=false}if(E.showSurveyByDefault!==e&&!E.showSurveyByDefault){f["webengage.survey.defaultRender"]=false}if(E.showNotificationByDefault!==e&&!E.showNotificationByDefault){f["webengage.notification.defaultRender"]=false}}o()}});var t=function(){m=f["webengage.licenseCode"];var G=a.createElement("webengagedata");a.body.insertBefore(G,null);s.weDataContainer=G;try{var K=a.createElement("style");var H=a.createTextNode("#webklipper-publisher-widget-container, #webklipper-publisher-widget-container * {overflow:visible; -webkit-box-sizing: content-box; -moz-box-sizing: content-box;  box-sizing: content-box;}");K.type="text/css";if(K.styleSheet){K.styleSheet.cssText=H.nodeValue}else{K.appendChild(H)}s.weDataContainer.appendChild(K)}catch(J){}var E=a.createElement("div");E.setAttribute("id",s.widgetContainerId);s.weDataContainer.appendChild(E);s.widgetContainer=E;var F=v.getWebengageCookie();if(!F){F=v.setWebengageCookie()}else{if(!F.luid){F=v.setWebengageCookie(v.getWebengageCookie())}}var I=v.getSessionCookie();if(!I||!I.suid){I=v.setSessionCookie(v.getSessionCookie(),true);F=v.updateTSC()}F=v.updateTPVC();if(typeof F.isGzip==="undefined"||!F.isGzip){v.loadScript.apply(s.widgetContainer,["//z.webengage.com/gz.js",function(){F=v.setGZIPFlag((typeof f.isGzip!="undefined"&&f.isGzip?true:false));q(F.isGzip,F.luid,I.suid)}])}else{q(F.isGzip,F.luid,I.suid)}};var q=function(F,G,E){d.webengage.setTimeout(function(){var I=(F?"webengage-zfiles":"webengage-files");var H="//s3.amazonaws.com/"+I+"/webengage/"+m+"/v3.js?r="+Math.floor((new Date()).getTime()/60000)+"&u="+G+"|"+E;v.loadScript.apply(s.widgetContainer,[H,function(){var J=c.setInterval(function(){if(typeof webengage_fs_configurationMap!=="undefined"&&webengage_fs_configurationMap.config){clearInterval(J);if(((webengage_fs_configurationMap.sites!==e&&webengage_fs_configurationMap.sites)||(webengage_fs_configurationMap.domain!==e&&webengage_fs_configurationMap.domain))&&!f["webengage.isDemoMode"]){var P=false;var K=v.getClientPageHost(),N;if(K.match(/\:[\d]*$/)){N=K.substring(K.indexOf(":")+1,K.length);K=K.substring(0,K.indexOf(":"))}var V=[];var Q=[];if(webengage_fs_configurationMap.sites===e||!webengage_fs_configurationMap.sites){webengage_fs_configurationMap.sites={};webengage_fs_configurationMap.sites[webengage_fs_configurationMap.domain]="DOMAIN"}for(var T in webengage_fs_configurationMap.sites){var R=T,U;if(webengage_fs_configurationMap.sites[T]=="DOMAIN"){V[V.length]=R;if(R.match(/^www\./i)){R=R.substring(4,R.length)}if(R.match(/\:[\d]*$/)){U=R.substring(R.indexOf(":")+1,R.length);R=R.substring(0,R.indexOf(":"))}if((K.match(new RegExp(v.escapeForRegExp(R)+"$","gi"))&&(!U||U==N))){P=true;break}}else{if(webengage_fs_configurationMap.sites[T]=="REGEXP"){var M=R;Q[Q.length]=R;if((v.getClientPageUrl().match(M))){P=true;break}}}}P=(f["webengage.notification.previewJson"]?true:P);if(!P){var O='The <a style="color: #00f;" href="http://webengage.com/" target="_blank">WebEngage (Survey, Feedback &amp; Notification)</a> widget on this page is incorrectly configured. It is meant for use only on ';if(V.length>0){O+="<b>"+V.join(", ")+"</b>"}if(Q.length>0){if(V.length>0){O+=(" and ")}O+=("pages with URLs that matches following regular expression(s) <b>"+Q.join(", ")+"</b>")}c.logger.error(O+".");return}}s.publisherTimeZoneOffset=webengage_fs_configurationMap.tzo;v.copy(C,(function(W){return{configurationMap:W?W:{}}})(webengage_fs_configurationMap));var S=v.getSessionCookie(),L=v.getWebengageCookie();if(!f["webengage.isDemoMode"]&&!S.vtd){c.dump("visitor","new-session",{lp:a.location.href});v.setVTD();v.setLST()}x(I)}},1)},null,function(){}])},(f["webengage.delay"]&&parseInt(f["webengage.delay"])>0?parseInt(f["webengage.delay"]):0))},D=function(I,E,G,H){var F="//s3.amazonaws.com/"+I+"/webengage/"+m+"/"+E[G]+".js?r="+H[G];v.loadScript.apply(s.widgetContainer,[F,function(){if(G==(E.length-1)){g()}else{D.apply(this,[I,E,(G+1),H])}}])},k=function(J){var F=f["webengage.customWidgetCode.ruleData"]||f["webengage.ruleData"]||{};customWidgetCodeIdsToExecuteClient=[];customWidgetCodeIdsToExecuteClientTimestamps=[];if(webengage_fs_configurationMap.cwcRuleList){var H=webengage_fs_configurationMap.cwcRuleList;for(var G=0;G<H.length;G++){var I=H[G].ruleCode;if(I){if(!c.ruleExecutor.execute(H[G].cwcEncId,I,F)){continue}}var E=customWidgetCodeIdsToExecuteClient.length;customWidgetCodeIdsToExecuteClient[E]=H[G].cwcEncId;customWidgetCodeIdsToExecuteClientTimestamps[E]=H[G].lastModifiedTimestamp}}if(customWidgetCodeIdsToExecuteClient.length>0){D.apply(this,[J,customWidgetCodeIdsToExecuteClient,0,customWidgetCodeIdsToExecuteClientTimestamps])}else{g()}},x=function(E){if((a.location.protocol=="http:"||(a.location.protocol=="https:"&&webengage_fs_configurationMap.sslEnabled))){v.usckwl(webengage_fs_configurationMap.domain);if(webengage_fs_configurationMap.cwcRuleList&&webengage_fs_configurationMap.cwcRuleList.length>0){k(E)}else{g()}}else{if(a.location.protocol=="https:"&&!C.sslEnabled){c.eLog(null,"error","Widget turned off for SSL encrypted page","CustomWidgetCode - Widget turned off for SSL encrypted page")}}},g=function(){(function(F){v.extend("widgetConfiguration",{});if(F&&F.config){v.copy(C,{feedback:{isEnabled:(typeof F.config.enableFeedback=="boolean"&&F.config.enableFeedback),config:F.config.feedbackConfig?F.config.feedbackConfig:{}}},true);v.copy(C,{survey:{isEnabled:(typeof F.config.enableSurvey=="boolean"&&F.config.enableSurvey),config:F.config.surveyConfig?F.config.surveyConfig:{},order:[],ruleMap:{}}},true);(function(I){if(F.surveyRuleList){var G=F.surveyRuleList;for(var H=0;H<G.length;H++){I.order[H]=G[H].surveyEncId;I.ruleMap[G[H].surveyEncId]=G[H]}}})(C.survey);v.copy(C,{notification:{isEnabled:(typeof F.config.enableNotification=="boolean"&&F.config.enableNotification),order:[],ruleMap:{}}},true);(function(H){if(F.notificationRuleList){var I=F.notificationRuleList;for(var G=0;G<I.length;G++){H.order[G]=I[G].notificationEncId;H.ruleMap[I[G].notificationEncId]={ruleCode:I[G].ruleCode,timespent:parseInt(I[G].timeSpent)!="NaN"?parseInt(I[G].timeSpent):0,totalTimeOnSite:parseInt(I[G].totalTimeOnSite)!="NaN"?parseInt(I[G].totalTimeOnSite):0,actionLinks:I[G].actionLinks||[],skipTargetPage:typeof(I[G].skipTargetPage)=="boolean"?I[G].skipTargetPage:false,maxTimesPerUser:I[G].maxTimesPerUser,startTimestamp:I[G].startTimestamp,endTimestamp:I[G].endTimestamp,layout:I[G].layout,version:((typeof I[G].v!="undefined")?I[G].v:0),showOnExit:I[G].showOnExit,mobile:I[G].mobile,sampling:I[G].sampling}}}})(C.notification);v.copy(C,{sslEnabled:(F.sslEnabled?F.sslEnabled:false),isSRQuotaOver:(F.isSRQ?F.isSRQ:false),isNQuotaOver:(F.isNQ?F.isNQ:false),isFQuotaOver:(F.isFQ?F.isFQ:false)},true);v.uwats(F.lastWidgetCheckDate)}function E(){var G=[];u=true;if(f["webengage.oldOnReady"]!==e&&typeof f["webengage.oldOnReady"]==="function"){G[G.length]=f["webengage.oldOnReady"];G[G.length]=B}else{if(f["webengage.onReady"]!==e&&typeof f["webengage.onReady"]==="function"){G[G.length]=f["webengage.onReady"]}G[G.length]=B;G[G.length]=o}var H=function(K){for(var J=0,I=K.length;J<I;J++){if(typeof K[J]==="function"){c.withELog(function(){K[J].call(c)},null,true)}else{if(v.isArray(K[J])){H(K[J])}}}};H(G);if(c.BrowserDetect.ie()&&c.BrowserDetect.version()<11&&d.attachEvent){d.attachEvent("onbeforeunload",function(){c.withELog(function(){c.winUnloading=true;v.setWebengageCookie(v.getWebengageCookie());v.updateSessionCookie(v.getSessionCookie())})})}}if(F&&F.goals!==e&&F.goals instanceof Array){v.loadScript.apply(s.widgetContainer,[s.csUrl,function(){if(c.goals&&typeof c.goals.init==="function"){c.goals.init(F)}}])}if(F&&F.GAEnabled){if((f["GA.universalAnalyticsFunction"]&&typeof d[f["GA.universalAnalyticsFunction"]]==="function")||typeof d.ga==="function"||d._gaq){v.loadScript.apply(s.widgetContainer,[s.gaCallbacksScriptUrl,E,null,E])}else{c.eLog(f["webengage.licenseCode"],"error","_gaq/ga undefined - not loading ga-callback-helper","_gaq/ga undefined");E()}}else{E()}})(C.configurationMap)},o=function(){var E=function(G){var F=typeof f["webengage."+G+".defaultRender"]==="boolean"?f["webengage."+G+".defaultRender"]:f["webengage.defaultRender"];return(typeof F==="boolean"?F:true)};if(E("feedback")){setTimeout(function(){c.feedback.render()},1)}if(E("survey")){setTimeout(function(){c.survey.render()},1)}if(E("notification")){setTimeout(function(){c.notification.render()},1)}};if(d.webengageWidgetInit!==e&&typeof d.webengageWidgetInit==="function"){d.webengageWidgetInit()}else{var r=a.getElementsByTagName("webengage")[0];if(r&&r.attributes){var p=r.attributes;f["webengage.licenseCode"]=p.license.value;f["webengage.language"]=(p.language?p.language.value:"");if(p.feedbackButtonAlignment){f["webengage.feedback.alignment"]=p.feedbackButtonAlignment.value}if(p.feedbackExternalLinkId){f["webengage.feedback.externalLinkId"]=p.feedbackExternalLinkId.value}}if(f["webengage.licenseCode"]!==e&&f["webengage.licenseCode"]){v.onDocReady(t)}}if(location.search.indexOf("libraryScript")>-1||sessionStorage.getItem("webengage-library")=="true"){var h=new RegExp("[\\?&]libraryScript=([^&#]*)");var w=h.exec(location.search);var A;if(w!=null){A=decodeURIComponent(w[1]);sessionStorage.setItem("webengage-library-script",A)}else{if(sessionStorage.getItem("webengage-library-script")){A=sessionStorage.getItem("webengage-library-script")}}sessionStorage.setItem("webengage-library","true");if(A){c.util.withWeJquery(function(){c.util.loadScript.apply(s.widgetContainer,["//d3701cc9l7v9a6.cloudfront.net/js/library/"+A+".js?v=404.00",function(){c.feedback.abort();c.survey.abort();c.notification.abort();sessionStorage.setItem("webengage-library",true)}])})}}};if(navigator.appName=="Microsoft Internet Explorer"){if(a.body&&(a.body.readyState=="loaded"||a.body.readyState=="complete")){b()}else{if(d.addEventListener){d.addEventListener("load",function(){b()},false)}else{if(d.attachEvent){d.attachEvent("onload",function(){b()})}}}}else{b()}c.getUser=function(){var g=c.util.getSessionCookie();return{pageUrl:d.location.href,pageTitle:a.title,referrer:(a.referrer||""),browser:c.BrowserDetect.browser(),browserVersion:c.BrowserDetect.version(),platform:c.BrowserDetect.os(),ip:(g?g.ip:""),city:(g?g.city:""),country:(g?g.country:"")}}})(window,document,_weq,webengage)},10);